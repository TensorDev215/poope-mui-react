"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk"] = self["webpackChunk"] || []).push([["vendors-node_modules_walletconnect_t"],{

/***/ "./node_modules/@walletconnect/types/dist/index.es.js"
/*!************************************************************!*\
  !*** ./node_modules/@walletconnect/types/dist/index.es.js ***!
  \************************************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ICore: () => (/* binding */ h),\n/* harmony export */   ICrypto: () => (/* binding */ g),\n/* harmony export */   IEchoClient: () => (/* binding */ O),\n/* harmony export */   IEngine: () => (/* binding */ V),\n/* harmony export */   IEngineEvents: () => (/* binding */ K),\n/* harmony export */   IEventClient: () => (/* binding */ R),\n/* harmony export */   IExpirer: () => (/* binding */ S),\n/* harmony export */   IJsonRpcHistory: () => (/* binding */ I),\n/* harmony export */   IKeyChain: () => (/* binding */ j),\n/* harmony export */   IMessageTracker: () => (/* binding */ y),\n/* harmony export */   IPairing: () => (/* binding */ $),\n/* harmony export */   IPublisher: () => (/* binding */ m),\n/* harmony export */   IRelayer: () => (/* binding */ d),\n/* harmony export */   ISignClient: () => (/* binding */ J),\n/* harmony export */   ISignClientEvents: () => (/* binding */ H),\n/* harmony export */   IStore: () => (/* binding */ f),\n/* harmony export */   ISubscriber: () => (/* binding */ P),\n/* harmony export */   ISubscriberTopicMap: () => (/* binding */ C),\n/* harmony export */   IVerify: () => (/* binding */ M)\n/* harmony export */ });\n/* harmony import */ var _walletconnect_events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @walletconnect/events */ \"./node_modules/@walletconnect/events/dist/esm/index.js\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! events */ \"./node_modules/events/events.js\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_1__);\nvar a=Object.defineProperty,u=(e,s,r)=>s in e?a(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,c=(e,s,r)=>u(e,typeof s!=\"symbol\"?s+\"\":s,r);class h extends _walletconnect_events__WEBPACK_IMPORTED_MODULE_0__.IEvents{constructor(s){super(),this.opts=s,c(this,\"protocol\",\"wc\"),c(this,\"version\",2)}}class g{constructor(s,r,t){this.core=s,this.logger=r}}var p=Object.defineProperty,b=(e,s,r)=>s in e?p(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,v=(e,s,r)=>b(e,typeof s!=\"symbol\"?s+\"\":s,r);class I extends _walletconnect_events__WEBPACK_IMPORTED_MODULE_0__.IEvents{constructor(s,r){super(),this.core=s,this.logger=r,v(this,\"records\",new Map)}}class y{constructor(s,r){this.logger=s,this.core=r}}class m extends _walletconnect_events__WEBPACK_IMPORTED_MODULE_0__.IEvents{constructor(s,r){super(),this.relayer=s,this.logger=r}}class d extends _walletconnect_events__WEBPACK_IMPORTED_MODULE_0__.IEvents{constructor(s){super()}}class f{constructor(s,r,t,q){this.core=s,this.logger=r,this.name=t}}var E=Object.defineProperty,x=(e,s,r)=>s in e?E(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,w=(e,s,r)=>x(e,typeof s!=\"symbol\"?s+\"\":s,r);class C{constructor(){w(this,\"map\",new Map)}}class P extends _walletconnect_events__WEBPACK_IMPORTED_MODULE_0__.IEvents{constructor(s,r){super(),this.relayer=s,this.logger=r}}class j{constructor(s,r){this.core=s,this.logger=r}}class S extends _walletconnect_events__WEBPACK_IMPORTED_MODULE_0__.IEvents{constructor(s,r){super(),this.core=s,this.logger=r}}class ${constructor(s,r){this.logger=s,this.core=r}}class M{constructor(s,r,t){this.core=s,this.logger=r,this.store=t}}class O{constructor(s,r){this.projectId=s,this.logger=r}}class R{constructor(s,r,t){this.core=s,this.logger=r,this.telemetryEnabled=t}}var T=Object.defineProperty,k=(e,s,r)=>s in e?T(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,i=(e,s,r)=>k(e,typeof s!=\"symbol\"?s+\"\":s,r);class H extends (events__WEBPACK_IMPORTED_MODULE_1___default()){constructor(){super()}}class J{constructor(s){this.opts=s,i(this,\"protocol\",\"wc\"),i(this,\"version\",2)}}class K extends events__WEBPACK_IMPORTED_MODULE_1__.EventEmitter{constructor(){super()}}class V{constructor(s){this.client=s}}\n//# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvdHlwZXMvZGlzdC9pbmRleC5lcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC90eXBlcy9kaXN0L2luZGV4LmVzLmpzPzYzZmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0e0lFdmVudHMgYXMgb31mcm9tXCJAd2FsbGV0Y29ubmVjdC9ldmVudHNcIjtpbXBvcnQgbix7RXZlbnRFbWl0dGVyIGFzIGx9ZnJvbVwiZXZlbnRzXCI7dmFyIGE9T2JqZWN0LmRlZmluZVByb3BlcnR5LHU9KGUscyxyKT0+cyBpbiBlP2EoZSxzLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpyfSk6ZVtzXT1yLGM9KGUscyxyKT0+dShlLHR5cGVvZiBzIT1cInN5bWJvbFwiP3MrXCJcIjpzLHIpO2NsYXNzIGggZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHMpe3N1cGVyKCksdGhpcy5vcHRzPXMsYyh0aGlzLFwicHJvdG9jb2xcIixcIndjXCIpLGModGhpcyxcInZlcnNpb25cIiwyKX19Y2xhc3MgZ3tjb25zdHJ1Y3RvcihzLHIsdCl7dGhpcy5jb3JlPXMsdGhpcy5sb2dnZXI9cn19dmFyIHA9T2JqZWN0LmRlZmluZVByb3BlcnR5LGI9KGUscyxyKT0+cyBpbiBlP3AoZSxzLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpyfSk6ZVtzXT1yLHY9KGUscyxyKT0+YihlLHR5cGVvZiBzIT1cInN5bWJvbFwiP3MrXCJcIjpzLHIpO2NsYXNzIEkgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHMscil7c3VwZXIoKSx0aGlzLmNvcmU9cyx0aGlzLmxvZ2dlcj1yLHYodGhpcyxcInJlY29yZHNcIixuZXcgTWFwKX19Y2xhc3MgeXtjb25zdHJ1Y3RvcihzLHIpe3RoaXMubG9nZ2VyPXMsdGhpcy5jb3JlPXJ9fWNsYXNzIG0gZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHMscil7c3VwZXIoKSx0aGlzLnJlbGF5ZXI9cyx0aGlzLmxvZ2dlcj1yfX1jbGFzcyBkIGV4dGVuZHMgb3tjb25zdHJ1Y3RvcihzKXtzdXBlcigpfX1jbGFzcyBme2NvbnN0cnVjdG9yKHMscix0LHEpe3RoaXMuY29yZT1zLHRoaXMubG9nZ2VyPXIsdGhpcy5uYW1lPXR9fXZhciBFPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSx4PShlLHMscik9PnMgaW4gZT9FKGUscyx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6cn0pOmVbc109cix3PShlLHMscik9PngoZSx0eXBlb2YgcyE9XCJzeW1ib2xcIj9zK1wiXCI6cyxyKTtjbGFzcyBDe2NvbnN0cnVjdG9yKCl7dyh0aGlzLFwibWFwXCIsbmV3IE1hcCl9fWNsYXNzIFAgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHMscil7c3VwZXIoKSx0aGlzLnJlbGF5ZXI9cyx0aGlzLmxvZ2dlcj1yfX1jbGFzcyBqe2NvbnN0cnVjdG9yKHMscil7dGhpcy5jb3JlPXMsdGhpcy5sb2dnZXI9cn19Y2xhc3MgUyBleHRlbmRzIG97Y29uc3RydWN0b3IocyxyKXtzdXBlcigpLHRoaXMuY29yZT1zLHRoaXMubG9nZ2VyPXJ9fWNsYXNzICR7Y29uc3RydWN0b3IocyxyKXt0aGlzLmxvZ2dlcj1zLHRoaXMuY29yZT1yfX1jbGFzcyBNe2NvbnN0cnVjdG9yKHMscix0KXt0aGlzLmNvcmU9cyx0aGlzLmxvZ2dlcj1yLHRoaXMuc3RvcmU9dH19Y2xhc3MgT3tjb25zdHJ1Y3RvcihzLHIpe3RoaXMucHJvamVjdElkPXMsdGhpcy5sb2dnZXI9cn19Y2xhc3MgUntjb25zdHJ1Y3RvcihzLHIsdCl7dGhpcy5jb3JlPXMsdGhpcy5sb2dnZXI9cix0aGlzLnRlbGVtZXRyeUVuYWJsZWQ9dH19dmFyIFQ9T2JqZWN0LmRlZmluZVByb3BlcnR5LGs9KGUscyxyKT0+cyBpbiBlP1QoZSxzLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpyfSk6ZVtzXT1yLGk9KGUscyxyKT0+ayhlLHR5cGVvZiBzIT1cInN5bWJvbFwiP3MrXCJcIjpzLHIpO2NsYXNzIEggZXh0ZW5kcyBue2NvbnN0cnVjdG9yKCl7c3VwZXIoKX19Y2xhc3MgSntjb25zdHJ1Y3RvcihzKXt0aGlzLm9wdHM9cyxpKHRoaXMsXCJwcm90b2NvbFwiLFwid2NcIiksaSh0aGlzLFwidmVyc2lvblwiLDIpfX1jbGFzcyBLIGV4dGVuZHMgbHtjb25zdHJ1Y3Rvcigpe3N1cGVyKCl9fWNsYXNzIFZ7Y29uc3RydWN0b3Iocyl7dGhpcy5jbGllbnQ9c319ZXhwb3J0e2ggYXMgSUNvcmUsZyBhcyBJQ3J5cHRvLE8gYXMgSUVjaG9DbGllbnQsViBhcyBJRW5naW5lLEsgYXMgSUVuZ2luZUV2ZW50cyxSIGFzIElFdmVudENsaWVudCxTIGFzIElFeHBpcmVyLEkgYXMgSUpzb25ScGNIaXN0b3J5LGogYXMgSUtleUNoYWluLHkgYXMgSU1lc3NhZ2VUcmFja2VyLCQgYXMgSVBhaXJpbmcsbSBhcyBJUHVibGlzaGVyLGQgYXMgSVJlbGF5ZXIsSiBhcyBJU2lnbkNsaWVudCxIIGFzIElTaWduQ2xpZW50RXZlbnRzLGYgYXMgSVN0b3JlLFAgYXMgSVN1YnNjcmliZXIsQyBhcyBJU3Vic2NyaWJlclRvcGljTWFwLE0gYXMgSVZlcmlmeX07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lcy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@walletconnect/types/dist/index.es.js\n\n}");

/***/ },

/***/ "./node_modules/@walletconnect/universal-provider/dist/index.es.js"
/*!*************************************************************************!*\
  !*** ./node_modules/@walletconnect/universal-provider/dist/index.es.js ***!
  \*************************************************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UniversalProvider: () => (/* binding */ oh),\n/* harmony export */   \"default\": () => (/* binding */ Z)\n/* harmony export */ });\n/* harmony import */ var _walletconnect_sign_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @walletconnect/sign-client */ \"./node_modules/@walletconnect/sign-client/dist/index.es.js\");\n/* harmony import */ var _walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @walletconnect/utils */ \"./node_modules/@walletconnect/utils/dist/index.es.js\");\n/* harmony import */ var _walletconnect_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @walletconnect/logger */ \"./node_modules/@walletconnect/logger/dist/index.es.js\");\n/* harmony import */ var _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @walletconnect/jsonrpc-http-connection */ \"./node_modules/@walletconnect/jsonrpc-http-connection/dist/index.es.js\");\n/* harmony import */ var _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @walletconnect/jsonrpc-provider */ \"./node_modules/@walletconnect/jsonrpc-provider/dist/index.es.js\");\n/* harmony import */ var _walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @walletconnect/jsonrpc-utils */ \"./node_modules/@walletconnect/jsonrpc-utils/dist/esm/index.js\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! events */ \"./node_modules/events/events.js\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_6__);\nconst be=\"error\",_t=\"wss://relay.walletconnect.org\",Ct=\"wc\",It=\"universal_provider\",$e=`${Ct}@2:${It}:`,ye=\"https://rpc.walletconnect.org/v1/\",w=\"generic\",Ot=`${ye}bundler`,f={DEFAULT_CHAIN_CHANGED:\"default_chain_changed\"};var G=typeof globalThis<\"u\"?globalThis:typeof window<\"u\"?window:typeof __webpack_require__.g<\"u\"?__webpack_require__.g:typeof self<\"u\"?self:{};function At(){this.__data__=[],this.size=0}var jt=At;function Ht(r,e){return r===e||r!==r&&e!==e}var z=Ht,Et=z;function St(r,e){for(var t=r.length;t--;)if(Et(r[t][0],e))return t;return-1}var k=St,Nt=k,Tt=Array.prototype,Dt=Tt.splice;function qt(r){var e=this.__data__,t=Nt(e,r);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():Dt.call(e,t,1),--this.size,!0}var Rt=qt,xt=k;function Lt(r){var e=this.__data__,t=xt(e,r);return t<0?void 0:e[t][1]}var Ut=Lt,Ft=k;function Mt(r){return Ft(this.__data__,r)>-1}var Gt=Mt,zt=k;function kt(r,e){var t=this.__data__,i=zt(t,r);return i<0?(++this.size,t.push([r,e])):t[i][1]=e,this}var Bt=kt,Vt=jt,Jt=Rt,Kt=Ut,Wt=Gt,Xt=Bt;function _(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}_.prototype.clear=Vt,_.prototype.delete=Jt,_.prototype.get=Kt,_.prototype.has=Wt,_.prototype.set=Xt;var B=_,Yt=B;function Zt(){this.__data__=new Yt,this.size=0}var Qt=Zt;function er(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}var tr=er;function rr(r){return this.__data__.get(r)}var ir=rr;function sr(r){return this.__data__.has(r)}var nr=sr,ar=typeof G==\"object\"&&G&&G.Object===Object&&G,we=ar,or=we,cr=typeof self==\"object\"&&self&&self.Object===Object&&self,hr=or||cr||Function(\"return this\")(),C=hr,pr=C,ur=pr.Symbol,_e=ur,Ce=_e,Ie=Object.prototype,lr=Ie.hasOwnProperty,dr=Ie.toString,F=Ce?Ce.toStringTag:void 0;function vr(r){var e=lr.call(r,F),t=r[F];try{r[F]=void 0;var i=!0}catch{}var s=dr.call(r);return i&&(e?r[F]=t:delete r[F]),s}var fr=vr,mr=Object.prototype,gr=mr.toString;function Pr(r){return gr.call(r)}var br=Pr,Oe=_e,$r=fr,yr=br,wr=\"[object Null]\",_r=\"[object Undefined]\",Ae=Oe?Oe.toStringTag:void 0;function Cr(r){return r==null?r===void 0?_r:wr:Ae&&Ae in Object(r)?$r(r):yr(r)}var V=Cr;function Ir(r){var e=typeof r;return r!=null&&(e==\"object\"||e==\"function\")}var $=Ir,Or=V,Ar=$,jr=\"[object AsyncFunction]\",Hr=\"[object Function]\",Er=\"[object GeneratorFunction]\",Sr=\"[object Proxy]\";function Nr(r){if(!Ar(r))return!1;var e=Or(r);return e==Hr||e==Er||e==jr||e==Sr}var te=Nr,Tr=C,Dr=Tr[\"__core-js_shared__\"],qr=Dr,re=qr,je=function(){var r=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||\"\");return r?\"Symbol(src)_1.\"+r:\"\"}();function Rr(r){return!!je&&je in r}var xr=Rr,Lr=Function.prototype,Ur=Lr.toString;function Fr(r){if(r!=null){try{return Ur.call(r)}catch{}try{return r+\"\"}catch{}}return\"\"}var Mr=Fr,Gr=te,zr=xr,kr=$,Br=Mr,Vr=/[\\\\^$.*+?()[\\]{}|]/g,Jr=/^\\[object .+?Constructor\\]$/,Kr=Function.prototype,Wr=Object.prototype,Xr=Kr.toString,Yr=Wr.hasOwnProperty,Zr=RegExp(\"^\"+Xr.call(Yr).replace(Vr,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");function Qr(r){if(!kr(r)||zr(r))return!1;var e=Gr(r)?Zr:Jr;return e.test(Br(r))}var ei=Qr;function ti(r,e){return r?.[e]}var ri=ti,ii=ei,si=ri;function ni(r,e){var t=si(r,e);return ii(t)?t:void 0}var ie=ni,ai=ie,oi=C,ci=ai(oi,\"Map\"),He=ci,hi=ie,pi=hi(Object,\"create\"),J=pi,Ee=J;function ui(){this.__data__=Ee?Ee(null):{},this.size=0}var li=ui;function di(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var vi=di,fi=J,mi=\"__lodash_hash_undefined__\",gi=Object.prototype,Pi=gi.hasOwnProperty;function bi(r){var e=this.__data__;if(fi){var t=e[r];return t===mi?void 0:t}return Pi.call(e,r)?e[r]:void 0}var $i=bi,yi=J,wi=Object.prototype,_i=wi.hasOwnProperty;function Ci(r){var e=this.__data__;return yi?e[r]!==void 0:_i.call(e,r)}var Ii=Ci,Oi=J,Ai=\"__lodash_hash_undefined__\";function ji(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=Oi&&e===void 0?Ai:e,this}var Hi=ji,Ei=li,Si=vi,Ni=$i,Ti=Ii,Di=Hi;function I(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}I.prototype.clear=Ei,I.prototype.delete=Si,I.prototype.get=Ni,I.prototype.has=Ti,I.prototype.set=Di;var qi=I,Se=qi,Ri=B,xi=He;function Li(){this.size=0,this.__data__={hash:new Se,map:new(xi||Ri),string:new Se}}var Ui=Li;function Fi(r){var e=typeof r;return e==\"string\"||e==\"number\"||e==\"symbol\"||e==\"boolean\"?r!==\"__proto__\":r===null}var Mi=Fi,Gi=Mi;function zi(r,e){var t=r.__data__;return Gi(e)?t[typeof e==\"string\"?\"string\":\"hash\"]:t.map}var K=zi,ki=K;function Bi(r){var e=ki(this,r).delete(r);return this.size-=e?1:0,e}var Vi=Bi,Ji=K;function Ki(r){return Ji(this,r).get(r)}var Wi=Ki,Xi=K;function Yi(r){return Xi(this,r).has(r)}var Zi=Yi,Qi=K;function es(r,e){var t=Qi(this,r),i=t.size;return t.set(r,e),this.size+=t.size==i?0:1,this}var ts=es,rs=Ui,is=Vi,ss=Wi,ns=Zi,as=ts;function O(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}O.prototype.clear=rs,O.prototype.delete=is,O.prototype.get=ss,O.prototype.has=ns,O.prototype.set=as;var os=O,cs=B,hs=He,ps=os,us=200;function ls(r,e){var t=this.__data__;if(t instanceof cs){var i=t.__data__;if(!hs||i.length<us-1)return i.push([r,e]),this.size=++t.size,this;t=this.__data__=new ps(i)}return t.set(r,e),this.size=t.size,this}var ds=ls,vs=B,fs=Qt,ms=tr,gs=ir,Ps=nr,bs=ds;function A(r){var e=this.__data__=new vs(r);this.size=e.size}A.prototype.clear=fs,A.prototype.delete=ms,A.prototype.get=gs,A.prototype.has=Ps,A.prototype.set=bs;var $s=A,ys=ie,ws=function(){try{var r=ys(Object,\"defineProperty\");return r({},\"\",{}),r}catch{}}(),Ne=ws,Te=Ne;function _s(r,e,t){e==\"__proto__\"&&Te?Te(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}var se=_s,Cs=se,Is=z;function Os(r,e,t){(t!==void 0&&!Is(r[e],t)||t===void 0&&!(e in r))&&Cs(r,e,t)}var De=Os;function As(r){return function(e,t,i){for(var s=-1,n=Object(e),a=i(e),o=a.length;o--;){var c=a[r?o:++s];if(t(n[c],c,n)===!1)break}return e}}var js=As,Hs=js,Es=Hs(),Ss=Es,ne={exports:{}};(function(r,e){var t=C,i=e&&!e.nodeType&&e,s=i&&!0&&r&&!r.nodeType&&r,n=s&&s.exports===i,a=n?t.Buffer:void 0,o=a?a.allocUnsafe:void 0;function c(u,l){if(l)return u.slice();var P=u.length,d=o?o(P):new u.constructor(P);return u.copy(d),d}r.exports=c})(ne,ne.exports);var Ns=C,Ts=Ns.Uint8Array,Ds=Ts,qe=Ds;function qs(r){var e=new r.constructor(r.byteLength);return new qe(e).set(new qe(r)),e}var Rs=qs,xs=Rs;function Ls(r,e){var t=e?xs(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var Us=Ls;function Fs(r,e){var t=-1,i=r.length;for(e||(e=Array(i));++t<i;)e[t]=r[t];return e}var Ms=Fs,Gs=$,Re=Object.create,zs=function(){function r(){}return function(e){if(!Gs(e))return{};if(Re)return Re(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}(),ks=zs;function Bs(r,e){return function(t){return r(e(t))}}var Vs=Bs,Js=Vs,Ks=Js(Object.getPrototypeOf,Object),xe=Ks,Ws=Object.prototype;function Xs(r){var e=r&&r.constructor,t=typeof e==\"function\"&&e.prototype||Ws;return r===t}var Le=Xs,Ys=ks,Zs=xe,Qs=Le;function en(r){return typeof r.constructor==\"function\"&&!Qs(r)?Ys(Zs(r)):{}}var tn=en;function rn(r){return r!=null&&typeof r==\"object\"}var M=rn,sn=V,nn=M,an=\"[object Arguments]\";function on(r){return nn(r)&&sn(r)==an}var cn=on,Ue=cn,hn=M,Fe=Object.prototype,pn=Fe.hasOwnProperty,un=Fe.propertyIsEnumerable,ln=Ue(function(){return arguments}())?Ue:function(r){return hn(r)&&pn.call(r,\"callee\")&&!un.call(r,\"callee\")},Me=ln,dn=Array.isArray,Ge=dn,vn=9007199254740991;function fn(r){return typeof r==\"number\"&&r>-1&&r%1==0&&r<=vn}var ze=fn,mn=te,gn=ze;function Pn(r){return r!=null&&gn(r.length)&&!mn(r)}var ae=Pn,bn=ae,$n=M;function yn(r){return $n(r)&&bn(r)}var wn=yn,W={exports:{}};function _n(){return!1}var Cn=_n;(function(r,e){var t=C,i=Cn,s=e&&!e.nodeType&&e,n=s&&!0&&r&&!r.nodeType&&r,a=n&&n.exports===s,o=a?t.Buffer:void 0,c=o?o.isBuffer:void 0,u=c||i;r.exports=u})(W,W.exports);var In=V,On=xe,An=M,jn=\"[object Object]\",Hn=Function.prototype,En=Object.prototype,ke=Hn.toString,Sn=En.hasOwnProperty,Nn=ke.call(Object);function Tn(r){if(!An(r)||In(r)!=jn)return!1;var e=On(r);if(e===null)return!0;var t=Sn.call(e,\"constructor\")&&e.constructor;return typeof t==\"function\"&&t instanceof t&&ke.call(t)==Nn}var Dn=Tn,qn=V,Rn=ze,xn=M,Ln=\"[object Arguments]\",Un=\"[object Array]\",Fn=\"[object Boolean]\",Mn=\"[object Date]\",Gn=\"[object Error]\",zn=\"[object Function]\",kn=\"[object Map]\",Bn=\"[object Number]\",Vn=\"[object Object]\",Jn=\"[object RegExp]\",Kn=\"[object Set]\",Wn=\"[object String]\",Xn=\"[object WeakMap]\",Yn=\"[object ArrayBuffer]\",Zn=\"[object DataView]\",Qn=\"[object Float32Array]\",ea=\"[object Float64Array]\",ta=\"[object Int8Array]\",ra=\"[object Int16Array]\",ia=\"[object Int32Array]\",sa=\"[object Uint8Array]\",na=\"[object Uint8ClampedArray]\",aa=\"[object Uint16Array]\",oa=\"[object Uint32Array]\",p={};p[Qn]=p[ea]=p[ta]=p[ra]=p[ia]=p[sa]=p[na]=p[aa]=p[oa]=!0,p[Ln]=p[Un]=p[Yn]=p[Fn]=p[Zn]=p[Mn]=p[Gn]=p[zn]=p[kn]=p[Bn]=p[Vn]=p[Jn]=p[Kn]=p[Wn]=p[Xn]=!1;function ca(r){return xn(r)&&Rn(r.length)&&!!p[qn(r)]}var ha=ca;function pa(r){return function(e){return r(e)}}var ua=pa,oe={exports:{}};(function(r,e){var t=we,i=e&&!e.nodeType&&e,s=i&&!0&&r&&!r.nodeType&&r,n=s&&s.exports===i,a=n&&t.process,o=function(){try{var c=s&&s.require&&s.require(\"util\").types;return c||a&&a.binding&&a.binding(\"util\")}catch{}}();r.exports=o})(oe,oe.exports);var la=ha,da=ua,Be=oe.exports,Ve=Be&&Be.isTypedArray,va=Ve?da(Ve):la,Je=va;function fa(r,e){if(!(e===\"constructor\"&&typeof r[e]==\"function\")&&e!=\"__proto__\")return r[e]}var Ke=fa,ma=se,ga=z,Pa=Object.prototype,ba=Pa.hasOwnProperty;function $a(r,e,t){var i=r[e];(!(ba.call(r,e)&&ga(i,t))||t===void 0&&!(e in r))&&ma(r,e,t)}var ya=$a,wa=ya,_a=se;function Ca(r,e,t,i){var s=!t;t||(t={});for(var n=-1,a=e.length;++n<a;){var o=e[n],c=i?i(t[o],r[o],o,t,r):void 0;c===void 0&&(c=r[o]),s?_a(t,o,c):wa(t,o,c)}return t}var Ia=Ca;function Oa(r,e){for(var t=-1,i=Array(r);++t<r;)i[t]=e(t);return i}var Aa=Oa,ja=9007199254740991,Ha=/^(?:0|[1-9]\\d*)$/;function Ea(r,e){var t=typeof r;return e=e??ja,!!e&&(t==\"number\"||t!=\"symbol\"&&Ha.test(r))&&r>-1&&r%1==0&&r<e}var We=Ea,Sa=Aa,Na=Me,Ta=Ge,Da=W.exports,qa=We,Ra=Je,xa=Object.prototype,La=xa.hasOwnProperty;function Ua(r,e){var t=Ta(r),i=!t&&Na(r),s=!t&&!i&&Da(r),n=!t&&!i&&!s&&Ra(r),a=t||i||s||n,o=a?Sa(r.length,String):[],c=o.length;for(var u in r)(e||La.call(r,u))&&!(a&&(u==\"length\"||s&&(u==\"offset\"||u==\"parent\")||n&&(u==\"buffer\"||u==\"byteLength\"||u==\"byteOffset\")||qa(u,c)))&&o.push(u);return o}var Fa=Ua;function Ma(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var Ga=Ma,za=$,ka=Le,Ba=Ga,Va=Object.prototype,Ja=Va.hasOwnProperty;function Ka(r){if(!za(r))return Ba(r);var e=ka(r),t=[];for(var i in r)i==\"constructor\"&&(e||!Ja.call(r,i))||t.push(i);return t}var Wa=Ka,Xa=Fa,Ya=Wa,Za=ae;function Qa(r){return Za(r)?Xa(r,!0):Ya(r)}var Xe=Qa,eo=Ia,to=Xe;function ro(r){return eo(r,to(r))}var io=ro,Ye=De,so=ne.exports,no=Us,ao=Ms,oo=tn,Ze=Me,Qe=Ge,co=wn,ho=W.exports,po=te,uo=$,lo=Dn,vo=Je,et=Ke,fo=io;function mo(r,e,t,i,s,n,a){var o=et(r,t),c=et(e,t),u=a.get(c);if(u){Ye(r,t,u);return}var l=n?n(o,c,t+\"\",r,e,a):void 0,P=l===void 0;if(P){var d=Qe(c),Q=!d&&ho(c),ve=!d&&!Q&&vo(c);l=c,d||Q||ve?Qe(o)?l=o:co(o)?l=ao(o):Q?(P=!1,l=so(c,!0)):ve?(P=!1,l=no(c,!0)):l=[]:lo(c)||Ze(c)?(l=o,Ze(o)?l=fo(o):(!uo(o)||po(o))&&(l=oo(c))):P=!1}P&&(a.set(c,l),s(l,c,i,n,a),a.delete(c)),Ye(r,t,l)}var go=mo,Po=$s,bo=De,$o=Ss,yo=go,wo=$,_o=Xe,Co=Ke;function tt(r,e,t,i,s){r!==e&&$o(e,function(n,a){if(s||(s=new Po),wo(n))yo(r,e,a,t,tt,i,s);else{var o=i?i(Co(r,a),n,a+\"\",r,e,s):void 0;o===void 0&&(o=n),bo(r,a,o)}},_o)}var Io=tt;function Oo(r){return r}var rt=Oo;function Ao(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}var jo=Ao,Ho=jo,it=Math.max;function Eo(r,e,t){return e=it(e===void 0?r.length-1:e,0),function(){for(var i=arguments,s=-1,n=it(i.length-e,0),a=Array(n);++s<n;)a[s]=i[e+s];s=-1;for(var o=Array(e+1);++s<e;)o[s]=i[s];return o[e]=t(a),Ho(r,this,o)}}var So=Eo;function No(r){return function(){return r}}var To=No,Do=To,st=Ne,qo=rt,Ro=st?function(r,e){return st(r,\"toString\",{configurable:!0,enumerable:!1,value:Do(e),writable:!0})}:qo,xo=Ro,Lo=800,Uo=16,Fo=Date.now;function Mo(r){var e=0,t=0;return function(){var i=Fo(),s=Uo-(i-t);if(t=i,s>0){if(++e>=Lo)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}var Go=Mo,zo=xo,ko=Go,Bo=ko(zo),Vo=Bo,Jo=rt,Ko=So,Wo=Vo;function Xo(r,e){return Wo(Ko(r,e,Jo),r+\"\")}var Yo=Xo,Zo=z,Qo=ae,ec=We,tc=$;function rc(r,e,t){if(!tc(t))return!1;var i=typeof e;return(i==\"number\"?Qo(t)&&ec(e,t.length):i==\"string\"&&e in t)?Zo(t[e],r):!1}var ic=rc,sc=Yo,nc=ic;function ac(r){return sc(function(e,t){var i=-1,s=t.length,n=s>1?t[s-1]:void 0,a=s>2?t[2]:void 0;for(n=r.length>3&&typeof n==\"function\"?(s--,n):void 0,a&&nc(t[0],t[1],a)&&(n=s<3?void 0:n,s=1),e=Object(e);++i<s;){var o=t[i];o&&r(e,o,i,n)}return e})}var oc=ac,cc=Io,hc=oc,pc=hc(function(r,e,t){cc(r,e,t)}),uc=pc,lc=Object.defineProperty,dc=Object.defineProperties,vc=Object.getOwnPropertyDescriptors,nt=Object.getOwnPropertySymbols,fc=Object.prototype.hasOwnProperty,mc=Object.prototype.propertyIsEnumerable,at=(r,e,t)=>e in r?lc(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,X=(r,e)=>{for(var t in e||(e={}))fc.call(e,t)&&at(r,t,e[t]);if(nt)for(var t of nt(e))mc.call(e,t)&&at(r,t,e[t]);return r},gc=(r,e)=>dc(r,vc(e));function v(r,e,t){var i;const s=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.parseChainId)(r);return((i=e.rpcMap)==null?void 0:i[s.reference])||`${ye}?chainId=${s.namespace}:${s.reference}&projectId=${t}`}function y(r){return r.includes(\":\")?r.split(\":\")[1]:r}function ot(r){return r.map(e=>`${e.split(\":\")[0]}:${e.split(\":\")[1]}`)}function Pc(r,e){const t=Object.keys(e.namespaces).filter(s=>s.includes(r));if(!t.length)return[];const i=[];return t.forEach(s=>{const n=e.namespaces[s].accounts;i.push(...n)}),i}function ce(r={},e={}){const t=ct(r),i=ct(e);return uc(t,i)}function ct(r){var e,t,i,s;const n={};if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.isValidObject)(r))return n;for(const[a,o]of Object.entries(r)){const c=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.isCaipNamespace)(a)?[a]:o.chains,u=o.methods||[],l=o.events||[],P=o.rpcMap||{},d=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.parseNamespaceKey)(a);n[d]=gc(X(X({},n[d]),o),{chains:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.mergeArrays)(c,(e=n[d])==null?void 0:e.chains),methods:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.mergeArrays)(u,(t=n[d])==null?void 0:t.methods),events:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.mergeArrays)(l,(i=n[d])==null?void 0:i.events),rpcMap:X(X({},P),(s=n[d])==null?void 0:s.rpcMap)})}return n}function bc(r){return r.includes(\":\")?r.split(\":\")[2]:r}function ht(r){const e={};for(const[t,i]of Object.entries(r)){const s=i.methods||[],n=i.events||[],a=i.accounts||[],o=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.isCaipNamespace)(t)?[t]:i.chains?i.chains:ot(i.accounts);e[t]={chains:o,methods:s,events:n,accounts:a}}return e}function he(r){return typeof r==\"number\"?r:r.includes(\"0x\")?parseInt(r,16):(r=r.includes(\":\")?r.split(\":\")[1]:r,isNaN(Number(r))?r:Number(r))}const pt={},h=r=>pt[r],pe=(r,e)=>{pt[r]=e};var $c=Object.defineProperty,yc=(r,e,t)=>e in r?$c(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,j=(r,e,t)=>yc(r,typeof e!=\"symbol\"?e+\"\":e,t);class wc{constructor(e){j(this,\"name\",\"polkadot\"),j(this,\"client\"),j(this,\"httpProviders\"),j(this,\"events\"),j(this,\"namespace\"),j(this,\"chainId\"),this.namespace=e.namespace,this.events=h(\"events\"),this.client=h(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error(\"ChainId not found\");return e.split(\":\")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(f.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(\":\")[1]===this.chainId.toString()).map(t=>t.split(\":\")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=y(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>\"u\")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||v(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_3__[\"default\"](i,h(\"disableProviderPing\")))}}var _c=Object.defineProperty,Cc=Object.defineProperties,Ic=Object.getOwnPropertyDescriptors,ut=Object.getOwnPropertySymbols,Oc=Object.prototype.hasOwnProperty,Ac=Object.prototype.propertyIsEnumerable,ue=(r,e,t)=>e in r?_c(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,lt=(r,e)=>{for(var t in e||(e={}))Oc.call(e,t)&&ue(r,t,e[t]);if(ut)for(var t of ut(e))Ac.call(e,t)&&ue(r,t,e[t]);return r},dt=(r,e)=>Cc(r,Ic(e)),H=(r,e,t)=>ue(r,typeof e!=\"symbol\"?e+\"\":e,t);class jc{constructor(e){H(this,\"name\",\"eip155\"),H(this,\"client\"),H(this,\"chainId\"),H(this,\"namespace\"),H(this,\"httpProviders\"),H(this,\"events\"),this.namespace=e.namespace,this.events=h(\"events\"),this.client=h(\"client\"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case\"eth_requestAccounts\":return this.getAccounts();case\"eth_accounts\":return this.getAccounts();case\"wallet_switchEthereumChain\":return await this.handleSwitchChain(e);case\"eth_chainId\":return parseInt(this.getDefaultChain());case\"wallet_getCapabilities\":return await this.getCapabilities(e);case\"wallet_getCallsStatus\":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(f.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error(\"ChainId not found\");return e.split(\":\")[1]}createHttpProvider(e,t){const i=t||v(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_3__.HttpConnection(i,h(\"disableProviderPing\")))}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=parseInt(y(t));e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(\":\")[1]===this.chainId.toString()).map(t=>t.split(\":\")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>\"u\")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,i;let s=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:\"0x0\";s=s.startsWith(\"0x\")?s:`0x${s}`;const n=parseInt(s,16);if(this.isChainApproved(n))this.setDefaultChain(`${n}`);else if(this.namespace.methods.includes(\"wallet_switchEthereumChain\"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${n}`);else throw new Error(`Failed to switch to chain 'eip155:${n}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,i,s;const n=(i=(t=e.request)==null?void 0:t.params)==null?void 0:i[0];if(!n)throw new Error(\"Missing address parameter in `wallet_getCapabilities` request\");const a=this.client.session.get(e.topic),o=((s=a?.sessionProperties)==null?void 0:s.capabilities)||{};if(o!=null&&o[n])return o?.[n];const c=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:dt(lt({},a.sessionProperties||{}),{capabilities:dt(lt({},o||{}),{[n]:c})})})}catch(u){console.warn(\"Failed to update session with capabilities\",u)}return c}async getCallStatus(e){var t,i;const s=this.client.session.get(e.topic),n=(t=s.sessionProperties)==null?void 0:t.bundler_name;if(n){const o=this.getBundlerUrl(e.chainId,n);try{return await this.getUserOperationReceipt(o,e)}catch(c){console.warn(\"Failed to fetch call status from bundler\",c,o)}}const a=(i=s.sessionProperties)==null?void 0:i.bundler_url;if(a)try{return await this.getUserOperationReceipt(a,e)}catch(o){console.warn(\"Failed to fetch call status from custom bundler\",o,a)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error(\"Fetching call status not approved by the wallet.\")}async getUserOperationReceipt(e,t){var i;const s=new URL(e),n=await fetch(s,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify((0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_5__.formatJsonRpcRequest)(\"eth_getUserOperationReceipt\",[(i=t.request.params)==null?void 0:i[0]]))});if(!n.ok)throw new Error(`Failed to fetch user operation receipt - ${n.status}`);return await n.json()}getBundlerUrl(e,t){return`${Ot}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var Hc=Object.defineProperty,Ec=(r,e,t)=>e in r?Hc(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,E=(r,e,t)=>Ec(r,typeof e!=\"symbol\"?e+\"\":e,t);class Sc{constructor(e){E(this,\"name\",\"solana\"),E(this,\"client\"),E(this,\"httpProviders\"),E(this,\"events\"),E(this,\"namespace\"),E(this,\"chainId\"),this.namespace=e.namespace,this.events=h(\"events\"),this.client=h(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(f.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error(\"ChainId not found\");return e.split(\":\")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(\":\")[1]===this.chainId.toString()).map(t=>t.split(\":\")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=y(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>\"u\")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||v(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_3__[\"default\"](i,h(\"disableProviderPing\")))}}var Nc=Object.defineProperty,Tc=(r,e,t)=>e in r?Nc(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,S=(r,e,t)=>Tc(r,typeof e!=\"symbol\"?e+\"\":e,t);class Dc{constructor(e){S(this,\"name\",\"cosmos\"),S(this,\"client\"),S(this,\"httpProviders\"),S(this,\"events\"),S(this,\"namespace\"),S(this,\"chainId\"),this.namespace=e.namespace,this.events=h(\"events\"),this.client=h(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error(\"ChainId not found\");return e.split(\":\")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(f.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(\":\")[1]===this.chainId.toString()).map(t=>t.split(\":\")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=y(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>\"u\")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||v(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_3__[\"default\"](i,h(\"disableProviderPing\")))}}var qc=Object.defineProperty,Rc=(r,e,t)=>e in r?qc(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,N=(r,e,t)=>Rc(r,typeof e!=\"symbol\"?e+\"\":e,t);class xc{constructor(e){N(this,\"name\",\"algorand\"),N(this,\"client\"),N(this,\"httpProviders\"),N(this,\"events\"),N(this,\"namespace\"),N(this,\"chainId\"),this.namespace=e.namespace,this.events=h(\"events\"),this.client=h(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||v(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(f.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error(\"ChainId not found\");return e.split(\":\")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(\":\")[1]===this.chainId.toString()).map(t=>t.split(\":\")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>\"u\")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||v(e,this.namespace,this.client.core.projectId);return typeof i>\"u\"?void 0:new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_3__[\"default\"](i,h(\"disableProviderPing\")))}}var Lc=Object.defineProperty,Uc=(r,e,t)=>e in r?Lc(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,T=(r,e,t)=>Uc(r,typeof e!=\"symbol\"?e+\"\":e,t);class Fc{constructor(e){T(this,\"name\",\"cip34\"),T(this,\"client\"),T(this,\"httpProviders\"),T(this,\"events\"),T(this,\"namespace\"),T(this,\"chainId\"),this.namespace=e.namespace,this.events=h(\"events\"),this.client=h(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error(\"ChainId not found\");return e.split(\":\")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(f.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(\":\")[1]===this.chainId.toString()).map(t=>t.split(\":\")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const i=this.getCardanoRPCUrl(t),s=y(t);e[s]=this.createHttpProvider(s,i)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>\"u\")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||this.getCardanoRPCUrl(e);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_3__[\"default\"](i,h(\"disableProviderPing\")))}}var Mc=Object.defineProperty,Gc=(r,e,t)=>e in r?Mc(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,D=(r,e,t)=>Gc(r,typeof e!=\"symbol\"?e+\"\":e,t);class zc{constructor(e){D(this,\"name\",\"elrond\"),D(this,\"client\"),D(this,\"httpProviders\"),D(this,\"events\"),D(this,\"namespace\"),D(this,\"chainId\"),this.namespace=e.namespace,this.events=h(\"events\"),this.client=h(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(f.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error(\"ChainId not found\");return e.split(\":\")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(\":\")[1]===this.chainId.toString()).map(t=>t.split(\":\")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=y(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>\"u\")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||v(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_3__[\"default\"](i,h(\"disableProviderPing\")))}}var kc=Object.defineProperty,Bc=(r,e,t)=>e in r?kc(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,q=(r,e,t)=>Bc(r,typeof e!=\"symbol\"?e+\"\":e,t);class Vc{constructor(e){q(this,\"name\",\"multiversx\"),q(this,\"client\"),q(this,\"httpProviders\"),q(this,\"events\"),q(this,\"namespace\"),q(this,\"chainId\"),this.namespace=e.namespace,this.events=h(\"events\"),this.client=h(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(f.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error(\"ChainId not found\");return e.split(\":\")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(\":\")[1]===this.chainId.toString()).map(t=>t.split(\":\")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=y(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>\"u\")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||v(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_3__[\"default\"](i,h(\"disableProviderPing\")))}}var Jc=Object.defineProperty,Kc=(r,e,t)=>e in r?Jc(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,R=(r,e,t)=>Kc(r,typeof e!=\"symbol\"?e+\"\":e,t);class Wc{constructor(e){R(this,\"name\",\"near\"),R(this,\"client\"),R(this,\"httpProviders\"),R(this,\"events\"),R(this,\"namespace\"),R(this,\"chainId\"),this.namespace=e.namespace,this.events=h(\"events\"),this.client=h(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error(\"ChainId not found\");return e.split(\":\")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||v(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(f.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(\":\")[1]===this.chainId.toString()).map(t=>t.split(\":\")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>\"u\")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||v(e,this.namespace);return typeof i>\"u\"?void 0:new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_3__[\"default\"](i,h(\"disableProviderPing\")))}}var Xc=Object.defineProperty,Yc=(r,e,t)=>e in r?Xc(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,x=(r,e,t)=>Yc(r,typeof e!=\"symbol\"?e+\"\":e,t);class Zc{constructor(e){x(this,\"name\",\"tezos\"),x(this,\"client\"),x(this,\"httpProviders\"),x(this,\"events\"),x(this,\"namespace\"),x(this,\"chainId\"),this.namespace=e.namespace,this.events=h(\"events\"),this.client=h(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error(\"ChainId not found\");return e.split(\":\")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||v(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(f.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(\":\")[1]===this.chainId.toString()).map(t=>t.split(\":\")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>\"u\")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||v(e,this.namespace);return typeof i>\"u\"?void 0:new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_3__[\"default\"](i))}}var Qc=Object.defineProperty,eh=(r,e,t)=>e in r?Qc(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,L=(r,e,t)=>eh(r,typeof e!=\"symbol\"?e+\"\":e,t);class th{constructor(e){L(this,\"name\",w),L(this,\"client\"),L(this,\"httpProviders\"),L(this,\"events\"),L(this,\"namespace\"),L(this,\"chainId\"),this.namespace=e.namespace,this.events=h(\"events\"),this.client=h(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(f.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error(\"ChainId not found\");return e.split(\":\")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(\":\")[1]===this.chainId.toString()).map(t=>t.split(\":\")[2]))]:[]}createHttpProviders(){var e,t;const i={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(s=>{const n=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.parseChainId)(s);i[`${n.namespace}:${n.reference}`]=this.createHttpProvider(s)}),i}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>\"u\")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||v(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_3__[\"default\"](i,h(\"disableProviderPing\")))}}var rh=Object.defineProperty,ih=Object.defineProperties,sh=Object.getOwnPropertyDescriptors,vt=Object.getOwnPropertySymbols,nh=Object.prototype.hasOwnProperty,ah=Object.prototype.propertyIsEnumerable,le=(r,e,t)=>e in r?rh(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Y=(r,e)=>{for(var t in e||(e={}))nh.call(e,t)&&le(r,t,e[t]);if(vt)for(var t of vt(e))ah.call(e,t)&&le(r,t,e[t]);return r},de=(r,e)=>ih(r,sh(e)),g=(r,e,t)=>le(r,typeof e!=\"symbol\"?e+\"\":e,t);class Z{constructor(e){g(this,\"client\"),g(this,\"namespaces\"),g(this,\"optionalNamespaces\"),g(this,\"sessionProperties\"),g(this,\"events\",new (events__WEBPACK_IMPORTED_MODULE_6___default())),g(this,\"rpcProviders\",{}),g(this,\"session\"),g(this,\"providerOpts\"),g(this,\"logger\"),g(this,\"uri\"),g(this,\"disableProviderPing\",!1),this.providerOpts=e,this.logger=typeof e?.logger<\"u\"&&typeof e?.logger!=\"string\"?e.logger:(0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_2__.pino)((0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_2__.getDefaultLoggerOptions)({level:e?.logger||be})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new Z(e);return await t.initialize(),t}async request(e,t,i){const[s,n]=this.validateChain(t);if(!this.session)throw new Error(\"Please call connect() before request()\");return await this.getProvider(s).request({request:Y({},e),chainId:`${s}:${n}`,topic:this.session.topic,expiry:i})}sendAsync(e,t,i,s){const n=new Date().getTime();this.request(e,i,s).then(a=>t(null,(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_5__.formatJsonRpcResult)(n,a))).catch(a=>t(a,void 0))}async enable(){if(!this.client)throw new Error(\"Sign Client not initialized\");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error(\"Please call connect() before enable()\");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.getSdkError)(\"USER_DISCONNECTED\")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error(\"Sign Client not initialized\");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error(\"Sign Client not initialized\");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:i,response:s}=await this.client.authenticate(e,t);i&&(this.uri=i,this.events.emit(\"display_uri\",i));const n=await s();if(this.session=n.session,this.session){const a=ht(this.session.namespaces);this.namespaces=ce(this.namespaces,a),this.persist(\"namespaces\",this.namespaces),this.onConnect()}return n}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){const{uri:t,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});t&&(this.uri=t,this.events.emit(\"display_uri\",t));const s=await i();this.session=s;const n=ht(s.namespaces);return this.namespaces=ce(this.namespaces,n),this.persist(\"namespaces\",this.namespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[i,s]=this.validateChain(e),n=this.getProvider(i);n.name===w?n.setDefaultChain(`${i}:${s}`,t):n.setDefaultChain(s,t)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(e={}){this.logger.info(\"Cleaning up inactive pairings...\");const t=this.client.pairing.getAll();if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.isValidArray)(t)){for(const i of t)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn(\"abortPairingAttempt is deprecated. This is now a no-op.\")}async checkStorage(){if(this.namespaces=await this.getFromStore(\"namespaces\"),this.optionalNamespaces=await this.getFromStore(\"optionalNamespaces\")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace(\"Initialized\"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await _walletconnect_sign_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].init({core:this.providerOpts.core,logger:this.providerOpts.logger||be,relayUrl:this.providerOpts.relayUrl||_t,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace(\"SignClient Initialized\")}createProviders(){if(!this.client)throw new Error(\"Sign Client not initialized\");if(!this.session)throw new Error(\"Session not initialized. Please call connect() before enable()\");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.parseNamespaceKey)(t)))];pe(\"client\",this.client),pe(\"events\",this.events),pe(\"disableProviderPing\",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const i=Pc(t,this.session),s=ot(i),n=ce(this.namespaces,this.optionalNamespaces),a=de(Y({},n[t]),{accounts:i,chains:s});switch(t){case\"eip155\":this.rpcProviders[t]=new jc({namespace:a});break;case\"algorand\":this.rpcProviders[t]=new xc({namespace:a});break;case\"solana\":this.rpcProviders[t]=new Sc({namespace:a});break;case\"cosmos\":this.rpcProviders[t]=new Dc({namespace:a});break;case\"polkadot\":this.rpcProviders[t]=new wc({namespace:a});break;case\"cip34\":this.rpcProviders[t]=new Fc({namespace:a});break;case\"elrond\":this.rpcProviders[t]=new zc({namespace:a});break;case\"multiversx\":this.rpcProviders[t]=new Vc({namespace:a});break;case\"near\":this.rpcProviders[t]=new Wc({namespace:a});break;case\"tezos\":this.rpcProviders[t]=new Zc({namespace:a});break;default:this.rpcProviders[w]?this.rpcProviders[w].updateNamespace(a):this.rpcProviders[w]=new th({namespace:a})}})}registerEventListeners(){if(typeof this.client>\"u\")throw new Error(\"Sign Client is not initialized\");this.client.on(\"session_ping\",e=>{this.events.emit(\"session_ping\",e)}),this.client.on(\"session_event\",e=>{const{params:t}=e,{event:i}=t;if(i.name===\"accountsChanged\"){const s=i.data;s&&(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.isValidArray)(s)&&this.events.emit(\"accountsChanged\",s.map(bc))}else if(i.name===\"chainChanged\"){const s=t.chainId,n=t.event.data,a=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.parseNamespaceKey)(s),o=he(s)!==he(n)?`${a}:${he(n)}`:s;this.onChainChanged(o)}else this.events.emit(i.name,i.data);this.events.emit(\"session_event\",e)}),this.client.on(\"session_update\",({topic:e,params:t})=>{var i;const{namespaces:s}=t,n=(i=this.client)==null?void 0:i.session.get(e);this.session=de(Y({},n),{namespaces:s}),this.onSessionUpdate(),this.events.emit(\"session_update\",{topic:e,params:t})}),this.client.on(\"session_delete\",async e=>{await this.cleanup(),this.events.emit(\"session_delete\",e),this.events.emit(\"disconnect\",de(Y({},(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.getSdkError)(\"USER_DISCONNECTED\")),{data:e.topic}))}),this.on(f.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[w]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:i,sessionProperties:s}=e;t&&Object.keys(t).length&&(this.namespaces=t),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=s,this.persist(\"namespaces\",t),this.persist(\"optionalNamespaces\",i)}validateChain(e){const[t,i]=e?.split(\":\")||[\"\",\"\"];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,i];if(t&&!Object.keys(this.namespaces||{}).map(a=>(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.parseNamespaceKey)(a)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&i)return[t,i];const s=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.parseNamespaceKey)(Object.keys(this.namespaces)[0]),n=this.rpcProviders[s].getDefaultChain();return[s,n]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){if(!this.namespaces)return;const[i,s]=this.validateChain(e);s&&(t||this.getProvider(i).setDefaultChain(s),this.namespaces[i]?this.namespaces[i].defaultChain=s:this.namespaces[`${i}:${s}`]?this.namespaces[`${i}:${s}`].defaultChain=s:this.namespaces[`${i}:${s}`]={defaultChain:s},this.persist(\"namespaces\",this.namespaces),this.events.emit(\"chainChanged\",s))}onConnect(){this.createProviders(),this.events.emit(\"connect\",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist(\"namespaces\",void 0),this.persist(\"optionalNamespaces\",void 0),this.persist(\"sessionProperties\",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${$e}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${$e}/${e}`)}}const oh=Z;\n//# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvdW5pdmVyc2FsLXByb3ZpZGVyL2Rpc3QvaW5kZXguZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvdW5pdmVyc2FsLXByb3ZpZGVyL2Rpc3QvaW5kZXguZXMuanM/YjMzMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZnQgZnJvbVwiQHdhbGxldGNvbm5lY3Qvc2lnbi1jbGllbnRcIjtpbXBvcnR7aXNWYWxpZE9iamVjdCBhcyBtdCxpc0NhaXBOYW1lc3BhY2UgYXMgZmUscGFyc2VOYW1lc3BhY2VLZXkgYXMgVSxtZXJnZUFycmF5cyBhcyBlZSxwYXJzZUNoYWluSWQgYXMgbWUsZ2V0U2RrRXJyb3IgYXMgZ2UsaXNWYWxpZEFycmF5IGFzIFBlfWZyb21cIkB3YWxsZXRjb25uZWN0L3V0aWxzXCI7aW1wb3J0e3Bpbm8gYXMgZ3QsZ2V0RGVmYXVsdExvZ2dlck9wdGlvbnMgYXMgUHR9ZnJvbVwiQHdhbGxldGNvbm5lY3QvbG9nZ2VyXCI7aW1wb3J0IGIse0h0dHBDb25uZWN0aW9uIGFzIGJ0fWZyb21cIkB3YWxsZXRjb25uZWN0L2pzb25ycGMtaHR0cC1jb25uZWN0aW9uXCI7aW1wb3J0e0pzb25ScGNQcm92aWRlciBhcyBtfWZyb21cIkB3YWxsZXRjb25uZWN0L2pzb25ycGMtcHJvdmlkZXJcIjtpbXBvcnR7Zm9ybWF0SnNvblJwY1JlcXVlc3QgYXMgJHQsZm9ybWF0SnNvblJwY1Jlc3VsdCBhcyB5dH1mcm9tXCJAd2FsbGV0Y29ubmVjdC9qc29ucnBjLXV0aWxzXCI7aW1wb3J0IHd0IGZyb21cImV2ZW50c1wiO2NvbnN0IGJlPVwiZXJyb3JcIixfdD1cIndzczovL3JlbGF5LndhbGxldGNvbm5lY3Qub3JnXCIsQ3Q9XCJ3Y1wiLEl0PVwidW5pdmVyc2FsX3Byb3ZpZGVyXCIsJGU9YCR7Q3R9QDI6JHtJdH06YCx5ZT1cImh0dHBzOi8vcnBjLndhbGxldGNvbm5lY3Qub3JnL3YxL1wiLHc9XCJnZW5lcmljXCIsT3Q9YCR7eWV9YnVuZGxlcmAsZj17REVGQVVMVF9DSEFJTl9DSEFOR0VEOlwiZGVmYXVsdF9jaGFpbl9jaGFuZ2VkXCJ9O3ZhciBHPXR5cGVvZiBnbG9iYWxUaGlzPFwidVwiP2dsb2JhbFRoaXM6dHlwZW9mIHdpbmRvdzxcInVcIj93aW5kb3c6dHlwZW9mIGdsb2JhbDxcInVcIj9nbG9iYWw6dHlwZW9mIHNlbGY8XCJ1XCI/c2VsZjp7fTtmdW5jdGlvbiBBdCgpe3RoaXMuX19kYXRhX189W10sdGhpcy5zaXplPTB9dmFyIGp0PUF0O2Z1bmN0aW9uIEh0KHIsZSl7cmV0dXJuIHI9PT1lfHxyIT09ciYmZSE9PWV9dmFyIHo9SHQsRXQ9ejtmdW5jdGlvbiBTdChyLGUpe2Zvcih2YXIgdD1yLmxlbmd0aDt0LS07KWlmKEV0KHJbdF1bMF0sZSkpcmV0dXJuIHQ7cmV0dXJuLTF9dmFyIGs9U3QsTnQ9ayxUdD1BcnJheS5wcm90b3R5cGUsRHQ9VHQuc3BsaWNlO2Z1bmN0aW9uIHF0KHIpe3ZhciBlPXRoaXMuX19kYXRhX18sdD1OdChlLHIpO2lmKHQ8MClyZXR1cm4hMTt2YXIgaT1lLmxlbmd0aC0xO3JldHVybiB0PT1pP2UucG9wKCk6RHQuY2FsbChlLHQsMSksLS10aGlzLnNpemUsITB9dmFyIFJ0PXF0LHh0PWs7ZnVuY3Rpb24gTHQocil7dmFyIGU9dGhpcy5fX2RhdGFfXyx0PXh0KGUscik7cmV0dXJuIHQ8MD92b2lkIDA6ZVt0XVsxXX12YXIgVXQ9THQsRnQ9aztmdW5jdGlvbiBNdChyKXtyZXR1cm4gRnQodGhpcy5fX2RhdGFfXyxyKT4tMX12YXIgR3Q9TXQsenQ9aztmdW5jdGlvbiBrdChyLGUpe3ZhciB0PXRoaXMuX19kYXRhX18saT16dCh0LHIpO3JldHVybiBpPDA/KCsrdGhpcy5zaXplLHQucHVzaChbcixlXSkpOnRbaV1bMV09ZSx0aGlzfXZhciBCdD1rdCxWdD1qdCxKdD1SdCxLdD1VdCxXdD1HdCxYdD1CdDtmdW5jdGlvbiBfKHIpe3ZhciBlPS0xLHQ9cj09bnVsbD8wOnIubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytlPHQ7KXt2YXIgaT1yW2VdO3RoaXMuc2V0KGlbMF0saVsxXSl9fV8ucHJvdG90eXBlLmNsZWFyPVZ0LF8ucHJvdG90eXBlLmRlbGV0ZT1KdCxfLnByb3RvdHlwZS5nZXQ9S3QsXy5wcm90b3R5cGUuaGFzPVd0LF8ucHJvdG90eXBlLnNldD1YdDt2YXIgQj1fLFl0PUI7ZnVuY3Rpb24gWnQoKXt0aGlzLl9fZGF0YV9fPW5ldyBZdCx0aGlzLnNpemU9MH12YXIgUXQ9WnQ7ZnVuY3Rpb24gZXIocil7dmFyIGU9dGhpcy5fX2RhdGFfXyx0PWUuZGVsZXRlKHIpO3JldHVybiB0aGlzLnNpemU9ZS5zaXplLHR9dmFyIHRyPWVyO2Z1bmN0aW9uIHJyKHIpe3JldHVybiB0aGlzLl9fZGF0YV9fLmdldChyKX12YXIgaXI9cnI7ZnVuY3Rpb24gc3Iocil7cmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKHIpfXZhciBucj1zcixhcj10eXBlb2YgRz09XCJvYmplY3RcIiYmRyYmRy5PYmplY3Q9PT1PYmplY3QmJkcsd2U9YXIsb3I9d2UsY3I9dHlwZW9mIHNlbGY9PVwib2JqZWN0XCImJnNlbGYmJnNlbGYuT2JqZWN0PT09T2JqZWN0JiZzZWxmLGhyPW9yfHxjcnx8RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpLEM9aHIscHI9Qyx1cj1wci5TeW1ib2wsX2U9dXIsQ2U9X2UsSWU9T2JqZWN0LnByb3RvdHlwZSxscj1JZS5oYXNPd25Qcm9wZXJ0eSxkcj1JZS50b1N0cmluZyxGPUNlP0NlLnRvU3RyaW5nVGFnOnZvaWQgMDtmdW5jdGlvbiB2cihyKXt2YXIgZT1sci5jYWxsKHIsRiksdD1yW0ZdO3RyeXtyW0ZdPXZvaWQgMDt2YXIgaT0hMH1jYXRjaHt9dmFyIHM9ZHIuY2FsbChyKTtyZXR1cm4gaSYmKGU/cltGXT10OmRlbGV0ZSByW0ZdKSxzfXZhciBmcj12cixtcj1PYmplY3QucHJvdG90eXBlLGdyPW1yLnRvU3RyaW5nO2Z1bmN0aW9uIFByKHIpe3JldHVybiBnci5jYWxsKHIpfXZhciBicj1QcixPZT1fZSwkcj1mcix5cj1icix3cj1cIltvYmplY3QgTnVsbF1cIixfcj1cIltvYmplY3QgVW5kZWZpbmVkXVwiLEFlPU9lP09lLnRvU3RyaW5nVGFnOnZvaWQgMDtmdW5jdGlvbiBDcihyKXtyZXR1cm4gcj09bnVsbD9yPT09dm9pZCAwP19yOndyOkFlJiZBZSBpbiBPYmplY3Qocik/JHIocik6eXIocil9dmFyIFY9Q3I7ZnVuY3Rpb24gSXIocil7dmFyIGU9dHlwZW9mIHI7cmV0dXJuIHIhPW51bGwmJihlPT1cIm9iamVjdFwifHxlPT1cImZ1bmN0aW9uXCIpfXZhciAkPUlyLE9yPVYsQXI9JCxqcj1cIltvYmplY3QgQXN5bmNGdW5jdGlvbl1cIixIcj1cIltvYmplY3QgRnVuY3Rpb25dXCIsRXI9XCJbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXVwiLFNyPVwiW29iamVjdCBQcm94eV1cIjtmdW5jdGlvbiBOcihyKXtpZighQXIocikpcmV0dXJuITE7dmFyIGU9T3Iocik7cmV0dXJuIGU9PUhyfHxlPT1Fcnx8ZT09anJ8fGU9PVNyfXZhciB0ZT1OcixUcj1DLERyPVRyW1wiX19jb3JlLWpzX3NoYXJlZF9fXCJdLHFyPURyLHJlPXFyLGplPWZ1bmN0aW9uKCl7dmFyIHI9L1teLl0rJC8uZXhlYyhyZSYmcmUua2V5cyYmcmUua2V5cy5JRV9QUk9UT3x8XCJcIik7cmV0dXJuIHI/XCJTeW1ib2woc3JjKV8xLlwiK3I6XCJcIn0oKTtmdW5jdGlvbiBScihyKXtyZXR1cm4hIWplJiZqZSBpbiByfXZhciB4cj1ScixMcj1GdW5jdGlvbi5wcm90b3R5cGUsVXI9THIudG9TdHJpbmc7ZnVuY3Rpb24gRnIocil7aWYociE9bnVsbCl7dHJ5e3JldHVybiBVci5jYWxsKHIpfWNhdGNoe310cnl7cmV0dXJuIHIrXCJcIn1jYXRjaHt9fXJldHVyblwiXCJ9dmFyIE1yPUZyLEdyPXRlLHpyPXhyLGtyPSQsQnI9TXIsVnI9L1tcXFxcXiQuKis/KClbXFxde318XS9nLEpyPS9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC8sS3I9RnVuY3Rpb24ucHJvdG90eXBlLFdyPU9iamVjdC5wcm90b3R5cGUsWHI9S3IudG9TdHJpbmcsWXI9V3IuaGFzT3duUHJvcGVydHksWnI9UmVnRXhwKFwiXlwiK1hyLmNhbGwoWXIpLnJlcGxhY2UoVnIsXCJcXFxcJCZcIikucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZyxcIiQxLio/XCIpK1wiJFwiKTtmdW5jdGlvbiBRcihyKXtpZigha3Iocil8fHpyKHIpKXJldHVybiExO3ZhciBlPUdyKHIpP1pyOkpyO3JldHVybiBlLnRlc3QoQnIocikpfXZhciBlaT1RcjtmdW5jdGlvbiB0aShyLGUpe3JldHVybiByPy5bZV19dmFyIHJpPXRpLGlpPWVpLHNpPXJpO2Z1bmN0aW9uIG5pKHIsZSl7dmFyIHQ9c2kocixlKTtyZXR1cm4gaWkodCk/dDp2b2lkIDB9dmFyIGllPW5pLGFpPWllLG9pPUMsY2k9YWkob2ksXCJNYXBcIiksSGU9Y2ksaGk9aWUscGk9aGkoT2JqZWN0LFwiY3JlYXRlXCIpLEo9cGksRWU9SjtmdW5jdGlvbiB1aSgpe3RoaXMuX19kYXRhX189RWU/RWUobnVsbCk6e30sdGhpcy5zaXplPTB9dmFyIGxpPXVpO2Z1bmN0aW9uIGRpKHIpe3ZhciBlPXRoaXMuaGFzKHIpJiZkZWxldGUgdGhpcy5fX2RhdGFfX1tyXTtyZXR1cm4gdGhpcy5zaXplLT1lPzE6MCxlfXZhciB2aT1kaSxmaT1KLG1pPVwiX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfX1wiLGdpPU9iamVjdC5wcm90b3R5cGUsUGk9Z2kuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gYmkocil7dmFyIGU9dGhpcy5fX2RhdGFfXztpZihmaSl7dmFyIHQ9ZVtyXTtyZXR1cm4gdD09PW1pP3ZvaWQgMDp0fXJldHVybiBQaS5jYWxsKGUscik/ZVtyXTp2b2lkIDB9dmFyICRpPWJpLHlpPUosd2k9T2JqZWN0LnByb3RvdHlwZSxfaT13aS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiBDaShyKXt2YXIgZT10aGlzLl9fZGF0YV9fO3JldHVybiB5aT9lW3JdIT09dm9pZCAwOl9pLmNhbGwoZSxyKX12YXIgSWk9Q2ksT2k9SixBaT1cIl9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX19cIjtmdW5jdGlvbiBqaShyLGUpe3ZhciB0PXRoaXMuX19kYXRhX187cmV0dXJuIHRoaXMuc2l6ZSs9dGhpcy5oYXMocik/MDoxLHRbcl09T2kmJmU9PT12b2lkIDA/QWk6ZSx0aGlzfXZhciBIaT1qaSxFaT1saSxTaT12aSxOaT0kaSxUaT1JaSxEaT1IaTtmdW5jdGlvbiBJKHIpe3ZhciBlPS0xLHQ9cj09bnVsbD8wOnIubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytlPHQ7KXt2YXIgaT1yW2VdO3RoaXMuc2V0KGlbMF0saVsxXSl9fUkucHJvdG90eXBlLmNsZWFyPUVpLEkucHJvdG90eXBlLmRlbGV0ZT1TaSxJLnByb3RvdHlwZS5nZXQ9TmksSS5wcm90b3R5cGUuaGFzPVRpLEkucHJvdG90eXBlLnNldD1EaTt2YXIgcWk9SSxTZT1xaSxSaT1CLHhpPUhlO2Z1bmN0aW9uIExpKCl7dGhpcy5zaXplPTAsdGhpcy5fX2RhdGFfXz17aGFzaDpuZXcgU2UsbWFwOm5ldyh4aXx8UmkpLHN0cmluZzpuZXcgU2V9fXZhciBVaT1MaTtmdW5jdGlvbiBGaShyKXt2YXIgZT10eXBlb2YgcjtyZXR1cm4gZT09XCJzdHJpbmdcInx8ZT09XCJudW1iZXJcInx8ZT09XCJzeW1ib2xcInx8ZT09XCJib29sZWFuXCI/ciE9PVwiX19wcm90b19fXCI6cj09PW51bGx9dmFyIE1pPUZpLEdpPU1pO2Z1bmN0aW9uIHppKHIsZSl7dmFyIHQ9ci5fX2RhdGFfXztyZXR1cm4gR2koZSk/dFt0eXBlb2YgZT09XCJzdHJpbmdcIj9cInN0cmluZ1wiOlwiaGFzaFwiXTp0Lm1hcH12YXIgSz16aSxraT1LO2Z1bmN0aW9uIEJpKHIpe3ZhciBlPWtpKHRoaXMscikuZGVsZXRlKHIpO3JldHVybiB0aGlzLnNpemUtPWU/MTowLGV9dmFyIFZpPUJpLEppPUs7ZnVuY3Rpb24gS2kocil7cmV0dXJuIEppKHRoaXMscikuZ2V0KHIpfXZhciBXaT1LaSxYaT1LO2Z1bmN0aW9uIFlpKHIpe3JldHVybiBYaSh0aGlzLHIpLmhhcyhyKX12YXIgWmk9WWksUWk9SztmdW5jdGlvbiBlcyhyLGUpe3ZhciB0PVFpKHRoaXMsciksaT10LnNpemU7cmV0dXJuIHQuc2V0KHIsZSksdGhpcy5zaXplKz10LnNpemU9PWk/MDoxLHRoaXN9dmFyIHRzPWVzLHJzPVVpLGlzPVZpLHNzPVdpLG5zPVppLGFzPXRzO2Z1bmN0aW9uIE8ocil7dmFyIGU9LTEsdD1yPT1udWxsPzA6ci5sZW5ndGg7Zm9yKHRoaXMuY2xlYXIoKTsrK2U8dDspe3ZhciBpPXJbZV07dGhpcy5zZXQoaVswXSxpWzFdKX19Ty5wcm90b3R5cGUuY2xlYXI9cnMsTy5wcm90b3R5cGUuZGVsZXRlPWlzLE8ucHJvdG90eXBlLmdldD1zcyxPLnByb3RvdHlwZS5oYXM9bnMsTy5wcm90b3R5cGUuc2V0PWFzO3ZhciBvcz1PLGNzPUIsaHM9SGUscHM9b3MsdXM9MjAwO2Z1bmN0aW9uIGxzKHIsZSl7dmFyIHQ9dGhpcy5fX2RhdGFfXztpZih0IGluc3RhbmNlb2YgY3Mpe3ZhciBpPXQuX19kYXRhX187aWYoIWhzfHxpLmxlbmd0aDx1cy0xKXJldHVybiBpLnB1c2goW3IsZV0pLHRoaXMuc2l6ZT0rK3Quc2l6ZSx0aGlzO3Q9dGhpcy5fX2RhdGFfXz1uZXcgcHMoaSl9cmV0dXJuIHQuc2V0KHIsZSksdGhpcy5zaXplPXQuc2l6ZSx0aGlzfXZhciBkcz1scyx2cz1CLGZzPVF0LG1zPXRyLGdzPWlyLFBzPW5yLGJzPWRzO2Z1bmN0aW9uIEEocil7dmFyIGU9dGhpcy5fX2RhdGFfXz1uZXcgdnMocik7dGhpcy5zaXplPWUuc2l6ZX1BLnByb3RvdHlwZS5jbGVhcj1mcyxBLnByb3RvdHlwZS5kZWxldGU9bXMsQS5wcm90b3R5cGUuZ2V0PWdzLEEucHJvdG90eXBlLmhhcz1QcyxBLnByb3RvdHlwZS5zZXQ9YnM7dmFyICRzPUEseXM9aWUsd3M9ZnVuY3Rpb24oKXt0cnl7dmFyIHI9eXMoT2JqZWN0LFwiZGVmaW5lUHJvcGVydHlcIik7cmV0dXJuIHIoe30sXCJcIix7fSkscn1jYXRjaHt9fSgpLE5lPXdzLFRlPU5lO2Z1bmN0aW9uIF9zKHIsZSx0KXtlPT1cIl9fcHJvdG9fX1wiJiZUZT9UZShyLGUse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHZhbHVlOnQsd3JpdGFibGU6ITB9KTpyW2VdPXR9dmFyIHNlPV9zLENzPXNlLElzPXo7ZnVuY3Rpb24gT3MocixlLHQpeyh0IT09dm9pZCAwJiYhSXMocltlXSx0KXx8dD09PXZvaWQgMCYmIShlIGluIHIpKSYmQ3MocixlLHQpfXZhciBEZT1PcztmdW5jdGlvbiBBcyhyKXtyZXR1cm4gZnVuY3Rpb24oZSx0LGkpe2Zvcih2YXIgcz0tMSxuPU9iamVjdChlKSxhPWkoZSksbz1hLmxlbmd0aDtvLS07KXt2YXIgYz1hW3I/bzorK3NdO2lmKHQobltjXSxjLG4pPT09ITEpYnJlYWt9cmV0dXJuIGV9fXZhciBqcz1BcyxIcz1qcyxFcz1IcygpLFNzPUVzLG5lPXtleHBvcnRzOnt9fTsoZnVuY3Rpb24ocixlKXt2YXIgdD1DLGk9ZSYmIWUubm9kZVR5cGUmJmUscz1pJiYhMCYmciYmIXIubm9kZVR5cGUmJnIsbj1zJiZzLmV4cG9ydHM9PT1pLGE9bj90LkJ1ZmZlcjp2b2lkIDAsbz1hP2EuYWxsb2NVbnNhZmU6dm9pZCAwO2Z1bmN0aW9uIGModSxsKXtpZihsKXJldHVybiB1LnNsaWNlKCk7dmFyIFA9dS5sZW5ndGgsZD1vP28oUCk6bmV3IHUuY29uc3RydWN0b3IoUCk7cmV0dXJuIHUuY29weShkKSxkfXIuZXhwb3J0cz1jfSkobmUsbmUuZXhwb3J0cyk7dmFyIE5zPUMsVHM9TnMuVWludDhBcnJheSxEcz1UcyxxZT1EcztmdW5jdGlvbiBxcyhyKXt2YXIgZT1uZXcgci5jb25zdHJ1Y3RvcihyLmJ5dGVMZW5ndGgpO3JldHVybiBuZXcgcWUoZSkuc2V0KG5ldyBxZShyKSksZX12YXIgUnM9cXMseHM9UnM7ZnVuY3Rpb24gTHMocixlKXt2YXIgdD1lP3hzKHIuYnVmZmVyKTpyLmJ1ZmZlcjtyZXR1cm4gbmV3IHIuY29uc3RydWN0b3IodCxyLmJ5dGVPZmZzZXQsci5sZW5ndGgpfXZhciBVcz1McztmdW5jdGlvbiBGcyhyLGUpe3ZhciB0PS0xLGk9ci5sZW5ndGg7Zm9yKGV8fChlPUFycmF5KGkpKTsrK3Q8aTspZVt0XT1yW3RdO3JldHVybiBlfXZhciBNcz1GcyxHcz0kLFJlPU9iamVjdC5jcmVhdGUsenM9ZnVuY3Rpb24oKXtmdW5jdGlvbiByKCl7fXJldHVybiBmdW5jdGlvbihlKXtpZighR3MoZSkpcmV0dXJue307aWYoUmUpcmV0dXJuIFJlKGUpO3IucHJvdG90eXBlPWU7dmFyIHQ9bmV3IHI7cmV0dXJuIHIucHJvdG90eXBlPXZvaWQgMCx0fX0oKSxrcz16cztmdW5jdGlvbiBCcyhyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gcihlKHQpKX19dmFyIFZzPUJzLEpzPVZzLEtzPUpzKE9iamVjdC5nZXRQcm90b3R5cGVPZixPYmplY3QpLHhlPUtzLFdzPU9iamVjdC5wcm90b3R5cGU7ZnVuY3Rpb24gWHMocil7dmFyIGU9ciYmci5jb25zdHJ1Y3Rvcix0PXR5cGVvZiBlPT1cImZ1bmN0aW9uXCImJmUucHJvdG90eXBlfHxXcztyZXR1cm4gcj09PXR9dmFyIExlPVhzLFlzPWtzLFpzPXhlLFFzPUxlO2Z1bmN0aW9uIGVuKHIpe3JldHVybiB0eXBlb2Ygci5jb25zdHJ1Y3Rvcj09XCJmdW5jdGlvblwiJiYhUXMocik/WXMoWnMocikpOnt9fXZhciB0bj1lbjtmdW5jdGlvbiBybihyKXtyZXR1cm4gciE9bnVsbCYmdHlwZW9mIHI9PVwib2JqZWN0XCJ9dmFyIE09cm4sc249Vixubj1NLGFuPVwiW29iamVjdCBBcmd1bWVudHNdXCI7ZnVuY3Rpb24gb24ocil7cmV0dXJuIG5uKHIpJiZzbihyKT09YW59dmFyIGNuPW9uLFVlPWNuLGhuPU0sRmU9T2JqZWN0LnByb3RvdHlwZSxwbj1GZS5oYXNPd25Qcm9wZXJ0eSx1bj1GZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxsbj1VZShmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpP1VlOmZ1bmN0aW9uKHIpe3JldHVybiBobihyKSYmcG4uY2FsbChyLFwiY2FsbGVlXCIpJiYhdW4uY2FsbChyLFwiY2FsbGVlXCIpfSxNZT1sbixkbj1BcnJheS5pc0FycmF5LEdlPWRuLHZuPTkwMDcxOTkyNTQ3NDA5OTE7ZnVuY3Rpb24gZm4ocil7cmV0dXJuIHR5cGVvZiByPT1cIm51bWJlclwiJiZyPi0xJiZyJTE9PTAmJnI8PXZufXZhciB6ZT1mbixtbj10ZSxnbj16ZTtmdW5jdGlvbiBQbihyKXtyZXR1cm4gciE9bnVsbCYmZ24oci5sZW5ndGgpJiYhbW4ocil9dmFyIGFlPVBuLGJuPWFlLCRuPU07ZnVuY3Rpb24geW4ocil7cmV0dXJuICRuKHIpJiZibihyKX12YXIgd249eW4sVz17ZXhwb3J0czp7fX07ZnVuY3Rpb24gX24oKXtyZXR1cm4hMX12YXIgQ249X247KGZ1bmN0aW9uKHIsZSl7dmFyIHQ9QyxpPUNuLHM9ZSYmIWUubm9kZVR5cGUmJmUsbj1zJiYhMCYmciYmIXIubm9kZVR5cGUmJnIsYT1uJiZuLmV4cG9ydHM9PT1zLG89YT90LkJ1ZmZlcjp2b2lkIDAsYz1vP28uaXNCdWZmZXI6dm9pZCAwLHU9Y3x8aTtyLmV4cG9ydHM9dX0pKFcsVy5leHBvcnRzKTt2YXIgSW49VixPbj14ZSxBbj1NLGpuPVwiW29iamVjdCBPYmplY3RdXCIsSG49RnVuY3Rpb24ucHJvdG90eXBlLEVuPU9iamVjdC5wcm90b3R5cGUsa2U9SG4udG9TdHJpbmcsU249RW4uaGFzT3duUHJvcGVydHksTm49a2UuY2FsbChPYmplY3QpO2Z1bmN0aW9uIFRuKHIpe2lmKCFBbihyKXx8SW4ocikhPWpuKXJldHVybiExO3ZhciBlPU9uKHIpO2lmKGU9PT1udWxsKXJldHVybiEwO3ZhciB0PVNuLmNhbGwoZSxcImNvbnN0cnVjdG9yXCIpJiZlLmNvbnN0cnVjdG9yO3JldHVybiB0eXBlb2YgdD09XCJmdW5jdGlvblwiJiZ0IGluc3RhbmNlb2YgdCYma2UuY2FsbCh0KT09Tm59dmFyIERuPVRuLHFuPVYsUm49emUseG49TSxMbj1cIltvYmplY3QgQXJndW1lbnRzXVwiLFVuPVwiW29iamVjdCBBcnJheV1cIixGbj1cIltvYmplY3QgQm9vbGVhbl1cIixNbj1cIltvYmplY3QgRGF0ZV1cIixHbj1cIltvYmplY3QgRXJyb3JdXCIsem49XCJbb2JqZWN0IEZ1bmN0aW9uXVwiLGtuPVwiW29iamVjdCBNYXBdXCIsQm49XCJbb2JqZWN0IE51bWJlcl1cIixWbj1cIltvYmplY3QgT2JqZWN0XVwiLEpuPVwiW29iamVjdCBSZWdFeHBdXCIsS249XCJbb2JqZWN0IFNldF1cIixXbj1cIltvYmplY3QgU3RyaW5nXVwiLFhuPVwiW29iamVjdCBXZWFrTWFwXVwiLFluPVwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIixabj1cIltvYmplY3QgRGF0YVZpZXddXCIsUW49XCJbb2JqZWN0IEZsb2F0MzJBcnJheV1cIixlYT1cIltvYmplY3QgRmxvYXQ2NEFycmF5XVwiLHRhPVwiW29iamVjdCBJbnQ4QXJyYXldXCIscmE9XCJbb2JqZWN0IEludDE2QXJyYXldXCIsaWE9XCJbb2JqZWN0IEludDMyQXJyYXldXCIsc2E9XCJbb2JqZWN0IFVpbnQ4QXJyYXldXCIsbmE9XCJbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XVwiLGFhPVwiW29iamVjdCBVaW50MTZBcnJheV1cIixvYT1cIltvYmplY3QgVWludDMyQXJyYXldXCIscD17fTtwW1FuXT1wW2VhXT1wW3RhXT1wW3JhXT1wW2lhXT1wW3NhXT1wW25hXT1wW2FhXT1wW29hXT0hMCxwW0xuXT1wW1VuXT1wW1luXT1wW0ZuXT1wW1puXT1wW01uXT1wW0duXT1wW3puXT1wW2tuXT1wW0JuXT1wW1ZuXT1wW0puXT1wW0tuXT1wW1duXT1wW1huXT0hMTtmdW5jdGlvbiBjYShyKXtyZXR1cm4geG4ocikmJlJuKHIubGVuZ3RoKSYmISFwW3FuKHIpXX12YXIgaGE9Y2E7ZnVuY3Rpb24gcGEocil7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiByKGUpfX12YXIgdWE9cGEsb2U9e2V4cG9ydHM6e319OyhmdW5jdGlvbihyLGUpe3ZhciB0PXdlLGk9ZSYmIWUubm9kZVR5cGUmJmUscz1pJiYhMCYmciYmIXIubm9kZVR5cGUmJnIsbj1zJiZzLmV4cG9ydHM9PT1pLGE9biYmdC5wcm9jZXNzLG89ZnVuY3Rpb24oKXt0cnl7dmFyIGM9cyYmcy5yZXF1aXJlJiZzLnJlcXVpcmUoXCJ1dGlsXCIpLnR5cGVzO3JldHVybiBjfHxhJiZhLmJpbmRpbmcmJmEuYmluZGluZyhcInV0aWxcIil9Y2F0Y2h7fX0oKTtyLmV4cG9ydHM9b30pKG9lLG9lLmV4cG9ydHMpO3ZhciBsYT1oYSxkYT11YSxCZT1vZS5leHBvcnRzLFZlPUJlJiZCZS5pc1R5cGVkQXJyYXksdmE9VmU/ZGEoVmUpOmxhLEplPXZhO2Z1bmN0aW9uIGZhKHIsZSl7aWYoIShlPT09XCJjb25zdHJ1Y3RvclwiJiZ0eXBlb2YgcltlXT09XCJmdW5jdGlvblwiKSYmZSE9XCJfX3Byb3RvX19cIilyZXR1cm4gcltlXX12YXIgS2U9ZmEsbWE9c2UsZ2E9eixQYT1PYmplY3QucHJvdG90eXBlLGJhPVBhLmhhc093blByb3BlcnR5O2Z1bmN0aW9uICRhKHIsZSx0KXt2YXIgaT1yW2VdOyghKGJhLmNhbGwocixlKSYmZ2EoaSx0KSl8fHQ9PT12b2lkIDAmJiEoZSBpbiByKSkmJm1hKHIsZSx0KX12YXIgeWE9JGEsd2E9eWEsX2E9c2U7ZnVuY3Rpb24gQ2EocixlLHQsaSl7dmFyIHM9IXQ7dHx8KHQ9e30pO2Zvcih2YXIgbj0tMSxhPWUubGVuZ3RoOysrbjxhOyl7dmFyIG89ZVtuXSxjPWk/aSh0W29dLHJbb10sbyx0LHIpOnZvaWQgMDtjPT09dm9pZCAwJiYoYz1yW29dKSxzP19hKHQsbyxjKTp3YSh0LG8sYyl9cmV0dXJuIHR9dmFyIElhPUNhO2Z1bmN0aW9uIE9hKHIsZSl7Zm9yKHZhciB0PS0xLGk9QXJyYXkocik7Kyt0PHI7KWlbdF09ZSh0KTtyZXR1cm4gaX12YXIgQWE9T2EsamE9OTAwNzE5OTI1NDc0MDk5MSxIYT0vXig/OjB8WzEtOV1cXGQqKSQvO2Z1bmN0aW9uIEVhKHIsZSl7dmFyIHQ9dHlwZW9mIHI7cmV0dXJuIGU9ZT8/amEsISFlJiYodD09XCJudW1iZXJcInx8dCE9XCJzeW1ib2xcIiYmSGEudGVzdChyKSkmJnI+LTEmJnIlMT09MCYmcjxlfXZhciBXZT1FYSxTYT1BYSxOYT1NZSxUYT1HZSxEYT1XLmV4cG9ydHMscWE9V2UsUmE9SmUseGE9T2JqZWN0LnByb3RvdHlwZSxMYT14YS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiBVYShyLGUpe3ZhciB0PVRhKHIpLGk9IXQmJk5hKHIpLHM9IXQmJiFpJiZEYShyKSxuPSF0JiYhaSYmIXMmJlJhKHIpLGE9dHx8aXx8c3x8bixvPWE/U2Eoci5sZW5ndGgsU3RyaW5nKTpbXSxjPW8ubGVuZ3RoO2Zvcih2YXIgdSBpbiByKShlfHxMYS5jYWxsKHIsdSkpJiYhKGEmJih1PT1cImxlbmd0aFwifHxzJiYodT09XCJvZmZzZXRcInx8dT09XCJwYXJlbnRcIil8fG4mJih1PT1cImJ1ZmZlclwifHx1PT1cImJ5dGVMZW5ndGhcInx8dT09XCJieXRlT2Zmc2V0XCIpfHxxYSh1LGMpKSkmJm8ucHVzaCh1KTtyZXR1cm4gb312YXIgRmE9VWE7ZnVuY3Rpb24gTWEocil7dmFyIGU9W107aWYociE9bnVsbClmb3IodmFyIHQgaW4gT2JqZWN0KHIpKWUucHVzaCh0KTtyZXR1cm4gZX12YXIgR2E9TWEsemE9JCxrYT1MZSxCYT1HYSxWYT1PYmplY3QucHJvdG90eXBlLEphPVZhLmhhc093blByb3BlcnR5O2Z1bmN0aW9uIEthKHIpe2lmKCF6YShyKSlyZXR1cm4gQmEocik7dmFyIGU9a2EociksdD1bXTtmb3IodmFyIGkgaW4gcilpPT1cImNvbnN0cnVjdG9yXCImJihlfHwhSmEuY2FsbChyLGkpKXx8dC5wdXNoKGkpO3JldHVybiB0fXZhciBXYT1LYSxYYT1GYSxZYT1XYSxaYT1hZTtmdW5jdGlvbiBRYShyKXtyZXR1cm4gWmEocik/WGEociwhMCk6WWEocil9dmFyIFhlPVFhLGVvPUlhLHRvPVhlO2Z1bmN0aW9uIHJvKHIpe3JldHVybiBlbyhyLHRvKHIpKX12YXIgaW89cm8sWWU9RGUsc289bmUuZXhwb3J0cyxubz1Vcyxhbz1Ncyxvbz10bixaZT1NZSxRZT1HZSxjbz13bixobz1XLmV4cG9ydHMscG89dGUsdW89JCxsbz1Ebix2bz1KZSxldD1LZSxmbz1pbztmdW5jdGlvbiBtbyhyLGUsdCxpLHMsbixhKXt2YXIgbz1ldChyLHQpLGM9ZXQoZSx0KSx1PWEuZ2V0KGMpO2lmKHUpe1llKHIsdCx1KTtyZXR1cm59dmFyIGw9bj9uKG8sYyx0K1wiXCIscixlLGEpOnZvaWQgMCxQPWw9PT12b2lkIDA7aWYoUCl7dmFyIGQ9UWUoYyksUT0hZCYmaG8oYyksdmU9IWQmJiFRJiZ2byhjKTtsPWMsZHx8UXx8dmU/UWUobyk/bD1vOmNvKG8pP2w9YW8obyk6UT8oUD0hMSxsPXNvKGMsITApKTp2ZT8oUD0hMSxsPW5vKGMsITApKTpsPVtdOmxvKGMpfHxaZShjKT8obD1vLFplKG8pP2w9Zm8obyk6KCF1byhvKXx8cG8obykpJiYobD1vbyhjKSkpOlA9ITF9UCYmKGEuc2V0KGMsbCkscyhsLGMsaSxuLGEpLGEuZGVsZXRlKGMpKSxZZShyLHQsbCl9dmFyIGdvPW1vLFBvPSRzLGJvPURlLCRvPVNzLHlvPWdvLHdvPSQsX289WGUsQ289S2U7ZnVuY3Rpb24gdHQocixlLHQsaSxzKXtyIT09ZSYmJG8oZSxmdW5jdGlvbihuLGEpe2lmKHN8fChzPW5ldyBQbyksd28obikpeW8ocixlLGEsdCx0dCxpLHMpO2Vsc2V7dmFyIG89aT9pKENvKHIsYSksbixhK1wiXCIscixlLHMpOnZvaWQgMDtvPT09dm9pZCAwJiYobz1uKSxibyhyLGEsbyl9fSxfbyl9dmFyIElvPXR0O2Z1bmN0aW9uIE9vKHIpe3JldHVybiByfXZhciBydD1PbztmdW5jdGlvbiBBbyhyLGUsdCl7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIHIuY2FsbChlKTtjYXNlIDE6cmV0dXJuIHIuY2FsbChlLHRbMF0pO2Nhc2UgMjpyZXR1cm4gci5jYWxsKGUsdFswXSx0WzFdKTtjYXNlIDM6cmV0dXJuIHIuY2FsbChlLHRbMF0sdFsxXSx0WzJdKX1yZXR1cm4gci5hcHBseShlLHQpfXZhciBqbz1BbyxIbz1qbyxpdD1NYXRoLm1heDtmdW5jdGlvbiBFbyhyLGUsdCl7cmV0dXJuIGU9aXQoZT09PXZvaWQgMD9yLmxlbmd0aC0xOmUsMCksZnVuY3Rpb24oKXtmb3IodmFyIGk9YXJndW1lbnRzLHM9LTEsbj1pdChpLmxlbmd0aC1lLDApLGE9QXJyYXkobik7KytzPG47KWFbc109aVtlK3NdO3M9LTE7Zm9yKHZhciBvPUFycmF5KGUrMSk7KytzPGU7KW9bc109aVtzXTtyZXR1cm4gb1tlXT10KGEpLEhvKHIsdGhpcyxvKX19dmFyIFNvPUVvO2Z1bmN0aW9uIE5vKHIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiByfX12YXIgVG89Tm8sRG89VG8sc3Q9TmUscW89cnQsUm89c3Q/ZnVuY3Rpb24ocixlKXtyZXR1cm4gc3QocixcInRvU3RyaW5nXCIse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiExLHZhbHVlOkRvKGUpLHdyaXRhYmxlOiEwfSl9OnFvLHhvPVJvLExvPTgwMCxVbz0xNixGbz1EYXRlLm5vdztmdW5jdGlvbiBNbyhyKXt2YXIgZT0wLHQ9MDtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaT1GbygpLHM9VW8tKGktdCk7aWYodD1pLHM+MCl7aWYoKytlPj1MbylyZXR1cm4gYXJndW1lbnRzWzBdfWVsc2UgZT0wO3JldHVybiByLmFwcGx5KHZvaWQgMCxhcmd1bWVudHMpfX12YXIgR289TW8sem89eG8sa289R28sQm89a28oem8pLFZvPUJvLEpvPXJ0LEtvPVNvLFdvPVZvO2Z1bmN0aW9uIFhvKHIsZSl7cmV0dXJuIFdvKEtvKHIsZSxKbykscitcIlwiKX12YXIgWW89WG8sWm89eixRbz1hZSxlYz1XZSx0Yz0kO2Z1bmN0aW9uIHJjKHIsZSx0KXtpZighdGModCkpcmV0dXJuITE7dmFyIGk9dHlwZW9mIGU7cmV0dXJuKGk9PVwibnVtYmVyXCI/UW8odCkmJmVjKGUsdC5sZW5ndGgpOmk9PVwic3RyaW5nXCImJmUgaW4gdCk/Wm8odFtlXSxyKTohMX12YXIgaWM9cmMsc2M9WW8sbmM9aWM7ZnVuY3Rpb24gYWMocil7cmV0dXJuIHNjKGZ1bmN0aW9uKGUsdCl7dmFyIGk9LTEscz10Lmxlbmd0aCxuPXM+MT90W3MtMV06dm9pZCAwLGE9cz4yP3RbMl06dm9pZCAwO2ZvcihuPXIubGVuZ3RoPjMmJnR5cGVvZiBuPT1cImZ1bmN0aW9uXCI/KHMtLSxuKTp2b2lkIDAsYSYmbmModFswXSx0WzFdLGEpJiYobj1zPDM/dm9pZCAwOm4scz0xKSxlPU9iamVjdChlKTsrK2k8czspe3ZhciBvPXRbaV07byYmcihlLG8saSxuKX1yZXR1cm4gZX0pfXZhciBvYz1hYyxjYz1JbyxoYz1vYyxwYz1oYyhmdW5jdGlvbihyLGUsdCl7Y2MocixlLHQpfSksdWM9cGMsbGM9T2JqZWN0LmRlZmluZVByb3BlcnR5LGRjPU9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzLHZjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzLG50PU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsZmM9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxtYz1PYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLGF0PShyLGUsdCk9PmUgaW4gcj9sYyhyLGUse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnR9KTpyW2VdPXQsWD0ocixlKT0+e2Zvcih2YXIgdCBpbiBlfHwoZT17fSkpZmMuY2FsbChlLHQpJiZhdChyLHQsZVt0XSk7aWYobnQpZm9yKHZhciB0IG9mIG50KGUpKW1jLmNhbGwoZSx0KSYmYXQocix0LGVbdF0pO3JldHVybiByfSxnYz0ocixlKT0+ZGMocix2YyhlKSk7ZnVuY3Rpb24gdihyLGUsdCl7dmFyIGk7Y29uc3Qgcz1tZShyKTtyZXR1cm4oKGk9ZS5ycGNNYXApPT1udWxsP3ZvaWQgMDppW3MucmVmZXJlbmNlXSl8fGAke3llfT9jaGFpbklkPSR7cy5uYW1lc3BhY2V9OiR7cy5yZWZlcmVuY2V9JnByb2plY3RJZD0ke3R9YH1mdW5jdGlvbiB5KHIpe3JldHVybiByLmluY2x1ZGVzKFwiOlwiKT9yLnNwbGl0KFwiOlwiKVsxXTpyfWZ1bmN0aW9uIG90KHIpe3JldHVybiByLm1hcChlPT5gJHtlLnNwbGl0KFwiOlwiKVswXX06JHtlLnNwbGl0KFwiOlwiKVsxXX1gKX1mdW5jdGlvbiBQYyhyLGUpe2NvbnN0IHQ9T2JqZWN0LmtleXMoZS5uYW1lc3BhY2VzKS5maWx0ZXIocz0+cy5pbmNsdWRlcyhyKSk7aWYoIXQubGVuZ3RoKXJldHVybltdO2NvbnN0IGk9W107cmV0dXJuIHQuZm9yRWFjaChzPT57Y29uc3Qgbj1lLm5hbWVzcGFjZXNbc10uYWNjb3VudHM7aS5wdXNoKC4uLm4pfSksaX1mdW5jdGlvbiBjZShyPXt9LGU9e30pe2NvbnN0IHQ9Y3QociksaT1jdChlKTtyZXR1cm4gdWModCxpKX1mdW5jdGlvbiBjdChyKXt2YXIgZSx0LGkscztjb25zdCBuPXt9O2lmKCFtdChyKSlyZXR1cm4gbjtmb3IoY29uc3RbYSxvXW9mIE9iamVjdC5lbnRyaWVzKHIpKXtjb25zdCBjPWZlKGEpP1thXTpvLmNoYWlucyx1PW8ubWV0aG9kc3x8W10sbD1vLmV2ZW50c3x8W10sUD1vLnJwY01hcHx8e30sZD1VKGEpO25bZF09Z2MoWChYKHt9LG5bZF0pLG8pLHtjaGFpbnM6ZWUoYywoZT1uW2RdKT09bnVsbD92b2lkIDA6ZS5jaGFpbnMpLG1ldGhvZHM6ZWUodSwodD1uW2RdKT09bnVsbD92b2lkIDA6dC5tZXRob2RzKSxldmVudHM6ZWUobCwoaT1uW2RdKT09bnVsbD92b2lkIDA6aS5ldmVudHMpLHJwY01hcDpYKFgoe30sUCksKHM9bltkXSk9PW51bGw/dm9pZCAwOnMucnBjTWFwKX0pfXJldHVybiBufWZ1bmN0aW9uIGJjKHIpe3JldHVybiByLmluY2x1ZGVzKFwiOlwiKT9yLnNwbGl0KFwiOlwiKVsyXTpyfWZ1bmN0aW9uIGh0KHIpe2NvbnN0IGU9e307Zm9yKGNvbnN0W3QsaV1vZiBPYmplY3QuZW50cmllcyhyKSl7Y29uc3Qgcz1pLm1ldGhvZHN8fFtdLG49aS5ldmVudHN8fFtdLGE9aS5hY2NvdW50c3x8W10sbz1mZSh0KT9bdF06aS5jaGFpbnM/aS5jaGFpbnM6b3QoaS5hY2NvdW50cyk7ZVt0XT17Y2hhaW5zOm8sbWV0aG9kczpzLGV2ZW50czpuLGFjY291bnRzOmF9fXJldHVybiBlfWZ1bmN0aW9uIGhlKHIpe3JldHVybiB0eXBlb2Ygcj09XCJudW1iZXJcIj9yOnIuaW5jbHVkZXMoXCIweFwiKT9wYXJzZUludChyLDE2KToocj1yLmluY2x1ZGVzKFwiOlwiKT9yLnNwbGl0KFwiOlwiKVsxXTpyLGlzTmFOKE51bWJlcihyKSk/cjpOdW1iZXIocikpfWNvbnN0IHB0PXt9LGg9cj0+cHRbcl0scGU9KHIsZSk9PntwdFtyXT1lfTt2YXIgJGM9T2JqZWN0LmRlZmluZVByb3BlcnR5LHljPShyLGUsdCk9PmUgaW4gcj8kYyhyLGUse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnR9KTpyW2VdPXQsaj0ocixlLHQpPT55YyhyLHR5cGVvZiBlIT1cInN5bWJvbFwiP2UrXCJcIjplLHQpO2NsYXNzIHdje2NvbnN0cnVjdG9yKGUpe2oodGhpcyxcIm5hbWVcIixcInBvbGthZG90XCIpLGoodGhpcyxcImNsaWVudFwiKSxqKHRoaXMsXCJodHRwUHJvdmlkZXJzXCIpLGoodGhpcyxcImV2ZW50c1wiKSxqKHRoaXMsXCJuYW1lc3BhY2VcIiksaih0aGlzLFwiY2hhaW5JZFwiKSx0aGlzLm5hbWVzcGFjZT1lLm5hbWVzcGFjZSx0aGlzLmV2ZW50cz1oKFwiZXZlbnRzXCIpLHRoaXMuY2xpZW50PWgoXCJjbGllbnRcIiksdGhpcy5jaGFpbklkPXRoaXMuZ2V0RGVmYXVsdENoYWluKCksdGhpcy5odHRwUHJvdmlkZXJzPXRoaXMuY3JlYXRlSHR0cFByb3ZpZGVycygpfXVwZGF0ZU5hbWVzcGFjZShlKXt0aGlzLm5hbWVzcGFjZT1PYmplY3QuYXNzaWduKHRoaXMubmFtZXNwYWNlLGUpfXJlcXVlc3RBY2NvdW50cygpe3JldHVybiB0aGlzLmdldEFjY291bnRzKCl9Z2V0RGVmYXVsdENoYWluKCl7aWYodGhpcy5jaGFpbklkKXJldHVybiB0aGlzLmNoYWluSWQ7aWYodGhpcy5uYW1lc3BhY2UuZGVmYXVsdENoYWluKXJldHVybiB0aGlzLm5hbWVzcGFjZS5kZWZhdWx0Q2hhaW47Y29uc3QgZT10aGlzLm5hbWVzcGFjZS5jaGFpbnNbMF07aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiQ2hhaW5JZCBub3QgZm91bmRcIik7cmV0dXJuIGUuc3BsaXQoXCI6XCIpWzFdfXJlcXVlc3QoZSl7cmV0dXJuIHRoaXMubmFtZXNwYWNlLm1ldGhvZHMuaW5jbHVkZXMoZS5yZXF1ZXN0Lm1ldGhvZCk/dGhpcy5jbGllbnQucmVxdWVzdChlKTp0aGlzLmdldEh0dHBQcm92aWRlcigpLnJlcXVlc3QoZS5yZXF1ZXN0KX1zZXREZWZhdWx0Q2hhaW4oZSx0KXt0aGlzLmh0dHBQcm92aWRlcnNbZV18fHRoaXMuc2V0SHR0cFByb3ZpZGVyKGUsdCksdGhpcy5jaGFpbklkPWUsdGhpcy5ldmVudHMuZW1pdChmLkRFRkFVTFRfQ0hBSU5fQ0hBTkdFRCxgJHt0aGlzLm5hbWV9OiR7ZX1gKX1nZXRBY2NvdW50cygpe2NvbnN0IGU9dGhpcy5uYW1lc3BhY2UuYWNjb3VudHM7cmV0dXJuIGU/ZS5maWx0ZXIodD0+dC5zcGxpdChcIjpcIilbMV09PT10aGlzLmNoYWluSWQudG9TdHJpbmcoKSkubWFwKHQ9PnQuc3BsaXQoXCI6XCIpWzJdKXx8W106W119Y3JlYXRlSHR0cFByb3ZpZGVycygpe2NvbnN0IGU9e307cmV0dXJuIHRoaXMubmFtZXNwYWNlLmNoYWlucy5mb3JFYWNoKHQ9Pnt2YXIgaTtjb25zdCBzPXkodCk7ZVtzXT10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcihzLChpPXRoaXMubmFtZXNwYWNlLnJwY01hcCk9PW51bGw/dm9pZCAwOmlbdF0pfSksZX1nZXRIdHRwUHJvdmlkZXIoKXtjb25zdCBlPWAke3RoaXMubmFtZX06JHt0aGlzLmNoYWluSWR9YCx0PXRoaXMuaHR0cFByb3ZpZGVyc1tlXTtpZih0eXBlb2YgdD5cInVcIil0aHJvdyBuZXcgRXJyb3IoYEpTT04tUlBDIHByb3ZpZGVyIGZvciAke2V9IG5vdCBmb3VuZGApO3JldHVybiB0fXNldEh0dHBQcm92aWRlcihlLHQpe2NvbnN0IGk9dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXIoZSx0KTtpJiYodGhpcy5odHRwUHJvdmlkZXJzW2VdPWkpfWNyZWF0ZUh0dHBQcm92aWRlcihlLHQpe2NvbnN0IGk9dHx8dihlLHRoaXMubmFtZXNwYWNlLHRoaXMuY2xpZW50LmNvcmUucHJvamVjdElkKTtpZighaSl0aHJvdyBuZXcgRXJyb3IoYE5vIFJQQyB1cmwgcHJvdmlkZWQgZm9yIGNoYWluSWQ6ICR7ZX1gKTtyZXR1cm4gbmV3IG0obmV3IGIoaSxoKFwiZGlzYWJsZVByb3ZpZGVyUGluZ1wiKSkpfX12YXIgX2M9T2JqZWN0LmRlZmluZVByb3BlcnR5LENjPU9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzLEljPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzLHV0PU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsT2M9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxBYz1PYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLHVlPShyLGUsdCk9PmUgaW4gcj9fYyhyLGUse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnR9KTpyW2VdPXQsbHQ9KHIsZSk9Pntmb3IodmFyIHQgaW4gZXx8KGU9e30pKU9jLmNhbGwoZSx0KSYmdWUocix0LGVbdF0pO2lmKHV0KWZvcih2YXIgdCBvZiB1dChlKSlBYy5jYWxsKGUsdCkmJnVlKHIsdCxlW3RdKTtyZXR1cm4gcn0sZHQ9KHIsZSk9PkNjKHIsSWMoZSkpLEg9KHIsZSx0KT0+dWUocix0eXBlb2YgZSE9XCJzeW1ib2xcIj9lK1wiXCI6ZSx0KTtjbGFzcyBqY3tjb25zdHJ1Y3RvcihlKXtIKHRoaXMsXCJuYW1lXCIsXCJlaXAxNTVcIiksSCh0aGlzLFwiY2xpZW50XCIpLEgodGhpcyxcImNoYWluSWRcIiksSCh0aGlzLFwibmFtZXNwYWNlXCIpLEgodGhpcyxcImh0dHBQcm92aWRlcnNcIiksSCh0aGlzLFwiZXZlbnRzXCIpLHRoaXMubmFtZXNwYWNlPWUubmFtZXNwYWNlLHRoaXMuZXZlbnRzPWgoXCJldmVudHNcIiksdGhpcy5jbGllbnQ9aChcImNsaWVudFwiKSx0aGlzLmh0dHBQcm92aWRlcnM9dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXJzKCksdGhpcy5jaGFpbklkPXBhcnNlSW50KHRoaXMuZ2V0RGVmYXVsdENoYWluKCkpfWFzeW5jIHJlcXVlc3QoZSl7c3dpdGNoKGUucmVxdWVzdC5tZXRob2Qpe2Nhc2VcImV0aF9yZXF1ZXN0QWNjb3VudHNcIjpyZXR1cm4gdGhpcy5nZXRBY2NvdW50cygpO2Nhc2VcImV0aF9hY2NvdW50c1wiOnJldHVybiB0aGlzLmdldEFjY291bnRzKCk7Y2FzZVwid2FsbGV0X3N3aXRjaEV0aGVyZXVtQ2hhaW5cIjpyZXR1cm4gYXdhaXQgdGhpcy5oYW5kbGVTd2l0Y2hDaGFpbihlKTtjYXNlXCJldGhfY2hhaW5JZFwiOnJldHVybiBwYXJzZUludCh0aGlzLmdldERlZmF1bHRDaGFpbigpKTtjYXNlXCJ3YWxsZXRfZ2V0Q2FwYWJpbGl0aWVzXCI6cmV0dXJuIGF3YWl0IHRoaXMuZ2V0Q2FwYWJpbGl0aWVzKGUpO2Nhc2VcIndhbGxldF9nZXRDYWxsc1N0YXR1c1wiOnJldHVybiBhd2FpdCB0aGlzLmdldENhbGxTdGF0dXMoZSl9cmV0dXJuIHRoaXMubmFtZXNwYWNlLm1ldGhvZHMuaW5jbHVkZXMoZS5yZXF1ZXN0Lm1ldGhvZCk/YXdhaXQgdGhpcy5jbGllbnQucmVxdWVzdChlKTp0aGlzLmdldEh0dHBQcm92aWRlcigpLnJlcXVlc3QoZS5yZXF1ZXN0KX11cGRhdGVOYW1lc3BhY2UoZSl7dGhpcy5uYW1lc3BhY2U9T2JqZWN0LmFzc2lnbih0aGlzLm5hbWVzcGFjZSxlKX1zZXREZWZhdWx0Q2hhaW4oZSx0KXt0aGlzLmh0dHBQcm92aWRlcnNbZV18fHRoaXMuc2V0SHR0cFByb3ZpZGVyKHBhcnNlSW50KGUpLHQpLHRoaXMuY2hhaW5JZD1wYXJzZUludChlKSx0aGlzLmV2ZW50cy5lbWl0KGYuREVGQVVMVF9DSEFJTl9DSEFOR0VELGAke3RoaXMubmFtZX06JHtlfWApfXJlcXVlc3RBY2NvdW50cygpe3JldHVybiB0aGlzLmdldEFjY291bnRzKCl9Z2V0RGVmYXVsdENoYWluKCl7aWYodGhpcy5jaGFpbklkKXJldHVybiB0aGlzLmNoYWluSWQudG9TdHJpbmcoKTtpZih0aGlzLm5hbWVzcGFjZS5kZWZhdWx0Q2hhaW4pcmV0dXJuIHRoaXMubmFtZXNwYWNlLmRlZmF1bHRDaGFpbjtjb25zdCBlPXRoaXMubmFtZXNwYWNlLmNoYWluc1swXTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJDaGFpbklkIG5vdCBmb3VuZFwiKTtyZXR1cm4gZS5zcGxpdChcIjpcIilbMV19Y3JlYXRlSHR0cFByb3ZpZGVyKGUsdCl7Y29uc3QgaT10fHx2KGAke3RoaXMubmFtZX06JHtlfWAsdGhpcy5uYW1lc3BhY2UsdGhpcy5jbGllbnQuY29yZS5wcm9qZWN0SWQpO2lmKCFpKXRocm93IG5ldyBFcnJvcihgTm8gUlBDIHVybCBwcm92aWRlZCBmb3IgY2hhaW5JZDogJHtlfWApO3JldHVybiBuZXcgbShuZXcgYnQoaSxoKFwiZGlzYWJsZVByb3ZpZGVyUGluZ1wiKSkpfXNldEh0dHBQcm92aWRlcihlLHQpe2NvbnN0IGk9dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXIoZSx0KTtpJiYodGhpcy5odHRwUHJvdmlkZXJzW2VdPWkpfWNyZWF0ZUh0dHBQcm92aWRlcnMoKXtjb25zdCBlPXt9O3JldHVybiB0aGlzLm5hbWVzcGFjZS5jaGFpbnMuZm9yRWFjaCh0PT57dmFyIGk7Y29uc3Qgcz1wYXJzZUludCh5KHQpKTtlW3NdPXRoaXMuY3JlYXRlSHR0cFByb3ZpZGVyKHMsKGk9dGhpcy5uYW1lc3BhY2UucnBjTWFwKT09bnVsbD92b2lkIDA6aVt0XSl9KSxlfWdldEFjY291bnRzKCl7Y29uc3QgZT10aGlzLm5hbWVzcGFjZS5hY2NvdW50cztyZXR1cm4gZT9bLi4ubmV3IFNldChlLmZpbHRlcih0PT50LnNwbGl0KFwiOlwiKVsxXT09PXRoaXMuY2hhaW5JZC50b1N0cmluZygpKS5tYXAodD0+dC5zcGxpdChcIjpcIilbMl0pKV06W119Z2V0SHR0cFByb3ZpZGVyKCl7Y29uc3QgZT10aGlzLmNoYWluSWQsdD10aGlzLmh0dHBQcm92aWRlcnNbZV07aWYodHlwZW9mIHQ+XCJ1XCIpdGhyb3cgbmV3IEVycm9yKGBKU09OLVJQQyBwcm92aWRlciBmb3IgJHtlfSBub3QgZm91bmRgKTtyZXR1cm4gdH1hc3luYyBoYW5kbGVTd2l0Y2hDaGFpbihlKXt2YXIgdCxpO2xldCBzPWUucmVxdWVzdC5wYXJhbXM/KHQ9ZS5yZXF1ZXN0LnBhcmFtc1swXSk9PW51bGw/dm9pZCAwOnQuY2hhaW5JZDpcIjB4MFwiO3M9cy5zdGFydHNXaXRoKFwiMHhcIik/czpgMHgke3N9YDtjb25zdCBuPXBhcnNlSW50KHMsMTYpO2lmKHRoaXMuaXNDaGFpbkFwcHJvdmVkKG4pKXRoaXMuc2V0RGVmYXVsdENoYWluKGAke259YCk7ZWxzZSBpZih0aGlzLm5hbWVzcGFjZS5tZXRob2RzLmluY2x1ZGVzKFwid2FsbGV0X3N3aXRjaEV0aGVyZXVtQ2hhaW5cIikpYXdhaXQgdGhpcy5jbGllbnQucmVxdWVzdCh7dG9waWM6ZS50b3BpYyxyZXF1ZXN0OnttZXRob2Q6ZS5yZXF1ZXN0Lm1ldGhvZCxwYXJhbXM6W3tjaGFpbklkOnN9XX0sY2hhaW5JZDooaT10aGlzLm5hbWVzcGFjZS5jaGFpbnMpPT1udWxsP3ZvaWQgMDppWzBdfSksdGhpcy5zZXREZWZhdWx0Q2hhaW4oYCR7bn1gKTtlbHNlIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHN3aXRjaCB0byBjaGFpbiAnZWlwMTU1OiR7bn0nLiBUaGUgY2hhaW4gaXMgbm90IGFwcHJvdmVkIG9yIHRoZSB3YWxsZXQgZG9lcyBub3Qgc3VwcG9ydCAnd2FsbGV0X3N3aXRjaEV0aGVyZXVtQ2hhaW4nIG1ldGhvZC5gKTtyZXR1cm4gbnVsbH1pc0NoYWluQXBwcm92ZWQoZSl7cmV0dXJuIHRoaXMubmFtZXNwYWNlLmNoYWlucy5pbmNsdWRlcyhgJHt0aGlzLm5hbWV9OiR7ZX1gKX1hc3luYyBnZXRDYXBhYmlsaXRpZXMoZSl7dmFyIHQsaSxzO2NvbnN0IG49KGk9KHQ9ZS5yZXF1ZXN0KT09bnVsbD92b2lkIDA6dC5wYXJhbXMpPT1udWxsP3ZvaWQgMDppWzBdO2lmKCFuKXRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgYWRkcmVzcyBwYXJhbWV0ZXIgaW4gYHdhbGxldF9nZXRDYXBhYmlsaXRpZXNgIHJlcXVlc3RcIik7Y29uc3QgYT10aGlzLmNsaWVudC5zZXNzaW9uLmdldChlLnRvcGljKSxvPSgocz1hPy5zZXNzaW9uUHJvcGVydGllcyk9PW51bGw/dm9pZCAwOnMuY2FwYWJpbGl0aWVzKXx8e307aWYobyE9bnVsbCYmb1tuXSlyZXR1cm4gbz8uW25dO2NvbnN0IGM9YXdhaXQgdGhpcy5jbGllbnQucmVxdWVzdChlKTt0cnl7YXdhaXQgdGhpcy5jbGllbnQuc2Vzc2lvbi51cGRhdGUoZS50b3BpYyx7c2Vzc2lvblByb3BlcnRpZXM6ZHQobHQoe30sYS5zZXNzaW9uUHJvcGVydGllc3x8e30pLHtjYXBhYmlsaXRpZXM6ZHQobHQoe30sb3x8e30pLHtbbl06Y30pfSl9KX1jYXRjaCh1KXtjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gdXBkYXRlIHNlc3Npb24gd2l0aCBjYXBhYmlsaXRpZXNcIix1KX1yZXR1cm4gY31hc3luYyBnZXRDYWxsU3RhdHVzKGUpe3ZhciB0LGk7Y29uc3Qgcz10aGlzLmNsaWVudC5zZXNzaW9uLmdldChlLnRvcGljKSxuPSh0PXMuc2Vzc2lvblByb3BlcnRpZXMpPT1udWxsP3ZvaWQgMDp0LmJ1bmRsZXJfbmFtZTtpZihuKXtjb25zdCBvPXRoaXMuZ2V0QnVuZGxlclVybChlLmNoYWluSWQsbik7dHJ5e3JldHVybiBhd2FpdCB0aGlzLmdldFVzZXJPcGVyYXRpb25SZWNlaXB0KG8sZSl9Y2F0Y2goYyl7Y29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGZldGNoIGNhbGwgc3RhdHVzIGZyb20gYnVuZGxlclwiLGMsbyl9fWNvbnN0IGE9KGk9cy5zZXNzaW9uUHJvcGVydGllcyk9PW51bGw/dm9pZCAwOmkuYnVuZGxlcl91cmw7aWYoYSl0cnl7cmV0dXJuIGF3YWl0IHRoaXMuZ2V0VXNlck9wZXJhdGlvblJlY2VpcHQoYSxlKX1jYXRjaChvKXtjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gZmV0Y2ggY2FsbCBzdGF0dXMgZnJvbSBjdXN0b20gYnVuZGxlclwiLG8sYSl9aWYodGhpcy5uYW1lc3BhY2UubWV0aG9kcy5pbmNsdWRlcyhlLnJlcXVlc3QubWV0aG9kKSlyZXR1cm4gYXdhaXQgdGhpcy5jbGllbnQucmVxdWVzdChlKTt0aHJvdyBuZXcgRXJyb3IoXCJGZXRjaGluZyBjYWxsIHN0YXR1cyBub3QgYXBwcm92ZWQgYnkgdGhlIHdhbGxldC5cIil9YXN5bmMgZ2V0VXNlck9wZXJhdGlvblJlY2VpcHQoZSx0KXt2YXIgaTtjb25zdCBzPW5ldyBVUkwoZSksbj1hd2FpdCBmZXRjaChzLHttZXRob2Q6XCJQT1NUXCIsaGVhZGVyczp7XCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb25cIn0sYm9keTpKU09OLnN0cmluZ2lmeSgkdChcImV0aF9nZXRVc2VyT3BlcmF0aW9uUmVjZWlwdFwiLFsoaT10LnJlcXVlc3QucGFyYW1zKT09bnVsbD92b2lkIDA6aVswXV0pKX0pO2lmKCFuLm9rKXRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHVzZXIgb3BlcmF0aW9uIHJlY2VpcHQgLSAke24uc3RhdHVzfWApO3JldHVybiBhd2FpdCBuLmpzb24oKX1nZXRCdW5kbGVyVXJsKGUsdCl7cmV0dXJuYCR7T3R9P3Byb2plY3RJZD0ke3RoaXMuY2xpZW50LmNvcmUucHJvamVjdElkfSZjaGFpbklkPSR7ZX0mYnVuZGxlcj0ke3R9YH19dmFyIEhjPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxFYz0ocixlLHQpPT5lIGluIHI/SGMocixlLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp0fSk6cltlXT10LEU9KHIsZSx0KT0+RWMocix0eXBlb2YgZSE9XCJzeW1ib2xcIj9lK1wiXCI6ZSx0KTtjbGFzcyBTY3tjb25zdHJ1Y3RvcihlKXtFKHRoaXMsXCJuYW1lXCIsXCJzb2xhbmFcIiksRSh0aGlzLFwiY2xpZW50XCIpLEUodGhpcyxcImh0dHBQcm92aWRlcnNcIiksRSh0aGlzLFwiZXZlbnRzXCIpLEUodGhpcyxcIm5hbWVzcGFjZVwiKSxFKHRoaXMsXCJjaGFpbklkXCIpLHRoaXMubmFtZXNwYWNlPWUubmFtZXNwYWNlLHRoaXMuZXZlbnRzPWgoXCJldmVudHNcIiksdGhpcy5jbGllbnQ9aChcImNsaWVudFwiKSx0aGlzLmNoYWluSWQ9dGhpcy5nZXREZWZhdWx0Q2hhaW4oKSx0aGlzLmh0dHBQcm92aWRlcnM9dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXJzKCl9dXBkYXRlTmFtZXNwYWNlKGUpe3RoaXMubmFtZXNwYWNlPU9iamVjdC5hc3NpZ24odGhpcy5uYW1lc3BhY2UsZSl9cmVxdWVzdEFjY291bnRzKCl7cmV0dXJuIHRoaXMuZ2V0QWNjb3VudHMoKX1yZXF1ZXN0KGUpe3JldHVybiB0aGlzLm5hbWVzcGFjZS5tZXRob2RzLmluY2x1ZGVzKGUucmVxdWVzdC5tZXRob2QpP3RoaXMuY2xpZW50LnJlcXVlc3QoZSk6dGhpcy5nZXRIdHRwUHJvdmlkZXIoKS5yZXF1ZXN0KGUucmVxdWVzdCl9c2V0RGVmYXVsdENoYWluKGUsdCl7dGhpcy5odHRwUHJvdmlkZXJzW2VdfHx0aGlzLnNldEh0dHBQcm92aWRlcihlLHQpLHRoaXMuY2hhaW5JZD1lLHRoaXMuZXZlbnRzLmVtaXQoZi5ERUZBVUxUX0NIQUlOX0NIQU5HRUQsYCR7dGhpcy5uYW1lfToke2V9YCl9Z2V0RGVmYXVsdENoYWluKCl7aWYodGhpcy5jaGFpbklkKXJldHVybiB0aGlzLmNoYWluSWQ7aWYodGhpcy5uYW1lc3BhY2UuZGVmYXVsdENoYWluKXJldHVybiB0aGlzLm5hbWVzcGFjZS5kZWZhdWx0Q2hhaW47Y29uc3QgZT10aGlzLm5hbWVzcGFjZS5jaGFpbnNbMF07aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiQ2hhaW5JZCBub3QgZm91bmRcIik7cmV0dXJuIGUuc3BsaXQoXCI6XCIpWzFdfWdldEFjY291bnRzKCl7Y29uc3QgZT10aGlzLm5hbWVzcGFjZS5hY2NvdW50cztyZXR1cm4gZT9bLi4ubmV3IFNldChlLmZpbHRlcih0PT50LnNwbGl0KFwiOlwiKVsxXT09PXRoaXMuY2hhaW5JZC50b1N0cmluZygpKS5tYXAodD0+dC5zcGxpdChcIjpcIilbMl0pKV06W119Y3JlYXRlSHR0cFByb3ZpZGVycygpe2NvbnN0IGU9e307cmV0dXJuIHRoaXMubmFtZXNwYWNlLmNoYWlucy5mb3JFYWNoKHQ9Pnt2YXIgaTtjb25zdCBzPXkodCk7ZVtzXT10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcihzLChpPXRoaXMubmFtZXNwYWNlLnJwY01hcCk9PW51bGw/dm9pZCAwOmlbdF0pfSksZX1nZXRIdHRwUHJvdmlkZXIoKXtjb25zdCBlPWAke3RoaXMubmFtZX06JHt0aGlzLmNoYWluSWR9YCx0PXRoaXMuaHR0cFByb3ZpZGVyc1tlXTtpZih0eXBlb2YgdD5cInVcIil0aHJvdyBuZXcgRXJyb3IoYEpTT04tUlBDIHByb3ZpZGVyIGZvciAke2V9IG5vdCBmb3VuZGApO3JldHVybiB0fXNldEh0dHBQcm92aWRlcihlLHQpe2NvbnN0IGk9dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXIoZSx0KTtpJiYodGhpcy5odHRwUHJvdmlkZXJzW2VdPWkpfWNyZWF0ZUh0dHBQcm92aWRlcihlLHQpe2NvbnN0IGk9dHx8dihlLHRoaXMubmFtZXNwYWNlLHRoaXMuY2xpZW50LmNvcmUucHJvamVjdElkKTtpZighaSl0aHJvdyBuZXcgRXJyb3IoYE5vIFJQQyB1cmwgcHJvdmlkZWQgZm9yIGNoYWluSWQ6ICR7ZX1gKTtyZXR1cm4gbmV3IG0obmV3IGIoaSxoKFwiZGlzYWJsZVByb3ZpZGVyUGluZ1wiKSkpfX12YXIgTmM9T2JqZWN0LmRlZmluZVByb3BlcnR5LFRjPShyLGUsdCk9PmUgaW4gcj9OYyhyLGUse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnR9KTpyW2VdPXQsUz0ocixlLHQpPT5UYyhyLHR5cGVvZiBlIT1cInN5bWJvbFwiP2UrXCJcIjplLHQpO2NsYXNzIERje2NvbnN0cnVjdG9yKGUpe1ModGhpcyxcIm5hbWVcIixcImNvc21vc1wiKSxTKHRoaXMsXCJjbGllbnRcIiksUyh0aGlzLFwiaHR0cFByb3ZpZGVyc1wiKSxTKHRoaXMsXCJldmVudHNcIiksUyh0aGlzLFwibmFtZXNwYWNlXCIpLFModGhpcyxcImNoYWluSWRcIiksdGhpcy5uYW1lc3BhY2U9ZS5uYW1lc3BhY2UsdGhpcy5ldmVudHM9aChcImV2ZW50c1wiKSx0aGlzLmNsaWVudD1oKFwiY2xpZW50XCIpLHRoaXMuY2hhaW5JZD10aGlzLmdldERlZmF1bHRDaGFpbigpLHRoaXMuaHR0cFByb3ZpZGVycz10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcnMoKX11cGRhdGVOYW1lc3BhY2UoZSl7dGhpcy5uYW1lc3BhY2U9T2JqZWN0LmFzc2lnbih0aGlzLm5hbWVzcGFjZSxlKX1yZXF1ZXN0QWNjb3VudHMoKXtyZXR1cm4gdGhpcy5nZXRBY2NvdW50cygpfWdldERlZmF1bHRDaGFpbigpe2lmKHRoaXMuY2hhaW5JZClyZXR1cm4gdGhpcy5jaGFpbklkO2lmKHRoaXMubmFtZXNwYWNlLmRlZmF1bHRDaGFpbilyZXR1cm4gdGhpcy5uYW1lc3BhY2UuZGVmYXVsdENoYWluO2NvbnN0IGU9dGhpcy5uYW1lc3BhY2UuY2hhaW5zWzBdO2lmKCFlKXRocm93IG5ldyBFcnJvcihcIkNoYWluSWQgbm90IGZvdW5kXCIpO3JldHVybiBlLnNwbGl0KFwiOlwiKVsxXX1yZXF1ZXN0KGUpe3JldHVybiB0aGlzLm5hbWVzcGFjZS5tZXRob2RzLmluY2x1ZGVzKGUucmVxdWVzdC5tZXRob2QpP3RoaXMuY2xpZW50LnJlcXVlc3QoZSk6dGhpcy5nZXRIdHRwUHJvdmlkZXIoKS5yZXF1ZXN0KGUucmVxdWVzdCl9c2V0RGVmYXVsdENoYWluKGUsdCl7dGhpcy5odHRwUHJvdmlkZXJzW2VdfHx0aGlzLnNldEh0dHBQcm92aWRlcihlLHQpLHRoaXMuY2hhaW5JZD1lLHRoaXMuZXZlbnRzLmVtaXQoZi5ERUZBVUxUX0NIQUlOX0NIQU5HRUQsYCR7dGhpcy5uYW1lfToke3RoaXMuY2hhaW5JZH1gKX1nZXRBY2NvdW50cygpe2NvbnN0IGU9dGhpcy5uYW1lc3BhY2UuYWNjb3VudHM7cmV0dXJuIGU/Wy4uLm5ldyBTZXQoZS5maWx0ZXIodD0+dC5zcGxpdChcIjpcIilbMV09PT10aGlzLmNoYWluSWQudG9TdHJpbmcoKSkubWFwKHQ9PnQuc3BsaXQoXCI6XCIpWzJdKSldOltdfWNyZWF0ZUh0dHBQcm92aWRlcnMoKXtjb25zdCBlPXt9O3JldHVybiB0aGlzLm5hbWVzcGFjZS5jaGFpbnMuZm9yRWFjaCh0PT57dmFyIGk7Y29uc3Qgcz15KHQpO2Vbc109dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXIocywoaT10aGlzLm5hbWVzcGFjZS5ycGNNYXApPT1udWxsP3ZvaWQgMDppW3RdKX0pLGV9Z2V0SHR0cFByb3ZpZGVyKCl7Y29uc3QgZT1gJHt0aGlzLm5hbWV9OiR7dGhpcy5jaGFpbklkfWAsdD10aGlzLmh0dHBQcm92aWRlcnNbZV07aWYodHlwZW9mIHQ+XCJ1XCIpdGhyb3cgbmV3IEVycm9yKGBKU09OLVJQQyBwcm92aWRlciBmb3IgJHtlfSBub3QgZm91bmRgKTtyZXR1cm4gdH1zZXRIdHRwUHJvdmlkZXIoZSx0KXtjb25zdCBpPXRoaXMuY3JlYXRlSHR0cFByb3ZpZGVyKGUsdCk7aSYmKHRoaXMuaHR0cFByb3ZpZGVyc1tlXT1pKX1jcmVhdGVIdHRwUHJvdmlkZXIoZSx0KXtjb25zdCBpPXR8fHYoZSx0aGlzLm5hbWVzcGFjZSx0aGlzLmNsaWVudC5jb3JlLnByb2plY3RJZCk7aWYoIWkpdGhyb3cgbmV3IEVycm9yKGBObyBSUEMgdXJsIHByb3ZpZGVkIGZvciBjaGFpbklkOiAke2V9YCk7cmV0dXJuIG5ldyBtKG5ldyBiKGksaChcImRpc2FibGVQcm92aWRlclBpbmdcIikpKX19dmFyIHFjPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxSYz0ocixlLHQpPT5lIGluIHI/cWMocixlLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp0fSk6cltlXT10LE49KHIsZSx0KT0+UmMocix0eXBlb2YgZSE9XCJzeW1ib2xcIj9lK1wiXCI6ZSx0KTtjbGFzcyB4Y3tjb25zdHJ1Y3RvcihlKXtOKHRoaXMsXCJuYW1lXCIsXCJhbGdvcmFuZFwiKSxOKHRoaXMsXCJjbGllbnRcIiksTih0aGlzLFwiaHR0cFByb3ZpZGVyc1wiKSxOKHRoaXMsXCJldmVudHNcIiksTih0aGlzLFwibmFtZXNwYWNlXCIpLE4odGhpcyxcImNoYWluSWRcIiksdGhpcy5uYW1lc3BhY2U9ZS5uYW1lc3BhY2UsdGhpcy5ldmVudHM9aChcImV2ZW50c1wiKSx0aGlzLmNsaWVudD1oKFwiY2xpZW50XCIpLHRoaXMuY2hhaW5JZD10aGlzLmdldERlZmF1bHRDaGFpbigpLHRoaXMuaHR0cFByb3ZpZGVycz10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcnMoKX11cGRhdGVOYW1lc3BhY2UoZSl7dGhpcy5uYW1lc3BhY2U9T2JqZWN0LmFzc2lnbih0aGlzLm5hbWVzcGFjZSxlKX1yZXF1ZXN0QWNjb3VudHMoKXtyZXR1cm4gdGhpcy5nZXRBY2NvdW50cygpfXJlcXVlc3QoZSl7cmV0dXJuIHRoaXMubmFtZXNwYWNlLm1ldGhvZHMuaW5jbHVkZXMoZS5yZXF1ZXN0Lm1ldGhvZCk/dGhpcy5jbGllbnQucmVxdWVzdChlKTp0aGlzLmdldEh0dHBQcm92aWRlcigpLnJlcXVlc3QoZS5yZXF1ZXN0KX1zZXREZWZhdWx0Q2hhaW4oZSx0KXtpZighdGhpcy5odHRwUHJvdmlkZXJzW2VdKXtjb25zdCBpPXR8fHYoYCR7dGhpcy5uYW1lfToke2V9YCx0aGlzLm5hbWVzcGFjZSx0aGlzLmNsaWVudC5jb3JlLnByb2plY3RJZCk7aWYoIWkpdGhyb3cgbmV3IEVycm9yKGBObyBSUEMgdXJsIHByb3ZpZGVkIGZvciBjaGFpbklkOiAke2V9YCk7dGhpcy5zZXRIdHRwUHJvdmlkZXIoZSxpKX10aGlzLmNoYWluSWQ9ZSx0aGlzLmV2ZW50cy5lbWl0KGYuREVGQVVMVF9DSEFJTl9DSEFOR0VELGAke3RoaXMubmFtZX06JHt0aGlzLmNoYWluSWR9YCl9Z2V0RGVmYXVsdENoYWluKCl7aWYodGhpcy5jaGFpbklkKXJldHVybiB0aGlzLmNoYWluSWQ7aWYodGhpcy5uYW1lc3BhY2UuZGVmYXVsdENoYWluKXJldHVybiB0aGlzLm5hbWVzcGFjZS5kZWZhdWx0Q2hhaW47Y29uc3QgZT10aGlzLm5hbWVzcGFjZS5jaGFpbnNbMF07aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiQ2hhaW5JZCBub3QgZm91bmRcIik7cmV0dXJuIGUuc3BsaXQoXCI6XCIpWzFdfWdldEFjY291bnRzKCl7Y29uc3QgZT10aGlzLm5hbWVzcGFjZS5hY2NvdW50cztyZXR1cm4gZT9bLi4ubmV3IFNldChlLmZpbHRlcih0PT50LnNwbGl0KFwiOlwiKVsxXT09PXRoaXMuY2hhaW5JZC50b1N0cmluZygpKS5tYXAodD0+dC5zcGxpdChcIjpcIilbMl0pKV06W119Y3JlYXRlSHR0cFByb3ZpZGVycygpe2NvbnN0IGU9e307cmV0dXJuIHRoaXMubmFtZXNwYWNlLmNoYWlucy5mb3JFYWNoKHQ9Pnt2YXIgaTtlW3RdPXRoaXMuY3JlYXRlSHR0cFByb3ZpZGVyKHQsKGk9dGhpcy5uYW1lc3BhY2UucnBjTWFwKT09bnVsbD92b2lkIDA6aVt0XSl9KSxlfWdldEh0dHBQcm92aWRlcigpe2NvbnN0IGU9YCR7dGhpcy5uYW1lfToke3RoaXMuY2hhaW5JZH1gLHQ9dGhpcy5odHRwUHJvdmlkZXJzW2VdO2lmKHR5cGVvZiB0PlwidVwiKXRocm93IG5ldyBFcnJvcihgSlNPTi1SUEMgcHJvdmlkZXIgZm9yICR7ZX0gbm90IGZvdW5kYCk7cmV0dXJuIHR9c2V0SHR0cFByb3ZpZGVyKGUsdCl7Y29uc3QgaT10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcihlLHQpO2kmJih0aGlzLmh0dHBQcm92aWRlcnNbZV09aSl9Y3JlYXRlSHR0cFByb3ZpZGVyKGUsdCl7Y29uc3QgaT10fHx2KGUsdGhpcy5uYW1lc3BhY2UsdGhpcy5jbGllbnQuY29yZS5wcm9qZWN0SWQpO3JldHVybiB0eXBlb2YgaT5cInVcIj92b2lkIDA6bmV3IG0obmV3IGIoaSxoKFwiZGlzYWJsZVByb3ZpZGVyUGluZ1wiKSkpfX12YXIgTGM9T2JqZWN0LmRlZmluZVByb3BlcnR5LFVjPShyLGUsdCk9PmUgaW4gcj9MYyhyLGUse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnR9KTpyW2VdPXQsVD0ocixlLHQpPT5VYyhyLHR5cGVvZiBlIT1cInN5bWJvbFwiP2UrXCJcIjplLHQpO2NsYXNzIEZje2NvbnN0cnVjdG9yKGUpe1QodGhpcyxcIm5hbWVcIixcImNpcDM0XCIpLFQodGhpcyxcImNsaWVudFwiKSxUKHRoaXMsXCJodHRwUHJvdmlkZXJzXCIpLFQodGhpcyxcImV2ZW50c1wiKSxUKHRoaXMsXCJuYW1lc3BhY2VcIiksVCh0aGlzLFwiY2hhaW5JZFwiKSx0aGlzLm5hbWVzcGFjZT1lLm5hbWVzcGFjZSx0aGlzLmV2ZW50cz1oKFwiZXZlbnRzXCIpLHRoaXMuY2xpZW50PWgoXCJjbGllbnRcIiksdGhpcy5jaGFpbklkPXRoaXMuZ2V0RGVmYXVsdENoYWluKCksdGhpcy5odHRwUHJvdmlkZXJzPXRoaXMuY3JlYXRlSHR0cFByb3ZpZGVycygpfXVwZGF0ZU5hbWVzcGFjZShlKXt0aGlzLm5hbWVzcGFjZT1PYmplY3QuYXNzaWduKHRoaXMubmFtZXNwYWNlLGUpfXJlcXVlc3RBY2NvdW50cygpe3JldHVybiB0aGlzLmdldEFjY291bnRzKCl9Z2V0RGVmYXVsdENoYWluKCl7aWYodGhpcy5jaGFpbklkKXJldHVybiB0aGlzLmNoYWluSWQ7aWYodGhpcy5uYW1lc3BhY2UuZGVmYXVsdENoYWluKXJldHVybiB0aGlzLm5hbWVzcGFjZS5kZWZhdWx0Q2hhaW47Y29uc3QgZT10aGlzLm5hbWVzcGFjZS5jaGFpbnNbMF07aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiQ2hhaW5JZCBub3QgZm91bmRcIik7cmV0dXJuIGUuc3BsaXQoXCI6XCIpWzFdfXJlcXVlc3QoZSl7cmV0dXJuIHRoaXMubmFtZXNwYWNlLm1ldGhvZHMuaW5jbHVkZXMoZS5yZXF1ZXN0Lm1ldGhvZCk/dGhpcy5jbGllbnQucmVxdWVzdChlKTp0aGlzLmdldEh0dHBQcm92aWRlcigpLnJlcXVlc3QoZS5yZXF1ZXN0KX1zZXREZWZhdWx0Q2hhaW4oZSx0KXt0aGlzLmh0dHBQcm92aWRlcnNbZV18fHRoaXMuc2V0SHR0cFByb3ZpZGVyKGUsdCksdGhpcy5jaGFpbklkPWUsdGhpcy5ldmVudHMuZW1pdChmLkRFRkFVTFRfQ0hBSU5fQ0hBTkdFRCxgJHt0aGlzLm5hbWV9OiR7dGhpcy5jaGFpbklkfWApfWdldEFjY291bnRzKCl7Y29uc3QgZT10aGlzLm5hbWVzcGFjZS5hY2NvdW50cztyZXR1cm4gZT9bLi4ubmV3IFNldChlLmZpbHRlcih0PT50LnNwbGl0KFwiOlwiKVsxXT09PXRoaXMuY2hhaW5JZC50b1N0cmluZygpKS5tYXAodD0+dC5zcGxpdChcIjpcIilbMl0pKV06W119Y3JlYXRlSHR0cFByb3ZpZGVycygpe2NvbnN0IGU9e307cmV0dXJuIHRoaXMubmFtZXNwYWNlLmNoYWlucy5mb3JFYWNoKHQ9Pntjb25zdCBpPXRoaXMuZ2V0Q2FyZGFub1JQQ1VybCh0KSxzPXkodCk7ZVtzXT10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcihzLGkpfSksZX1nZXRIdHRwUHJvdmlkZXIoKXtjb25zdCBlPWAke3RoaXMubmFtZX06JHt0aGlzLmNoYWluSWR9YCx0PXRoaXMuaHR0cFByb3ZpZGVyc1tlXTtpZih0eXBlb2YgdD5cInVcIil0aHJvdyBuZXcgRXJyb3IoYEpTT04tUlBDIHByb3ZpZGVyIGZvciAke2V9IG5vdCBmb3VuZGApO3JldHVybiB0fWdldENhcmRhbm9SUENVcmwoZSl7Y29uc3QgdD10aGlzLm5hbWVzcGFjZS5ycGNNYXA7aWYodClyZXR1cm4gdFtlXX1zZXRIdHRwUHJvdmlkZXIoZSx0KXtjb25zdCBpPXRoaXMuY3JlYXRlSHR0cFByb3ZpZGVyKGUsdCk7aSYmKHRoaXMuaHR0cFByb3ZpZGVyc1tlXT1pKX1jcmVhdGVIdHRwUHJvdmlkZXIoZSx0KXtjb25zdCBpPXR8fHRoaXMuZ2V0Q2FyZGFub1JQQ1VybChlKTtpZighaSl0aHJvdyBuZXcgRXJyb3IoYE5vIFJQQyB1cmwgcHJvdmlkZWQgZm9yIGNoYWluSWQ6ICR7ZX1gKTtyZXR1cm4gbmV3IG0obmV3IGIoaSxoKFwiZGlzYWJsZVByb3ZpZGVyUGluZ1wiKSkpfX12YXIgTWM9T2JqZWN0LmRlZmluZVByb3BlcnR5LEdjPShyLGUsdCk9PmUgaW4gcj9NYyhyLGUse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnR9KTpyW2VdPXQsRD0ocixlLHQpPT5HYyhyLHR5cGVvZiBlIT1cInN5bWJvbFwiP2UrXCJcIjplLHQpO2NsYXNzIHpje2NvbnN0cnVjdG9yKGUpe0QodGhpcyxcIm5hbWVcIixcImVscm9uZFwiKSxEKHRoaXMsXCJjbGllbnRcIiksRCh0aGlzLFwiaHR0cFByb3ZpZGVyc1wiKSxEKHRoaXMsXCJldmVudHNcIiksRCh0aGlzLFwibmFtZXNwYWNlXCIpLEQodGhpcyxcImNoYWluSWRcIiksdGhpcy5uYW1lc3BhY2U9ZS5uYW1lc3BhY2UsdGhpcy5ldmVudHM9aChcImV2ZW50c1wiKSx0aGlzLmNsaWVudD1oKFwiY2xpZW50XCIpLHRoaXMuY2hhaW5JZD10aGlzLmdldERlZmF1bHRDaGFpbigpLHRoaXMuaHR0cFByb3ZpZGVycz10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcnMoKX11cGRhdGVOYW1lc3BhY2UoZSl7dGhpcy5uYW1lc3BhY2U9T2JqZWN0LmFzc2lnbih0aGlzLm5hbWVzcGFjZSxlKX1yZXF1ZXN0QWNjb3VudHMoKXtyZXR1cm4gdGhpcy5nZXRBY2NvdW50cygpfXJlcXVlc3QoZSl7cmV0dXJuIHRoaXMubmFtZXNwYWNlLm1ldGhvZHMuaW5jbHVkZXMoZS5yZXF1ZXN0Lm1ldGhvZCk/dGhpcy5jbGllbnQucmVxdWVzdChlKTp0aGlzLmdldEh0dHBQcm92aWRlcigpLnJlcXVlc3QoZS5yZXF1ZXN0KX1zZXREZWZhdWx0Q2hhaW4oZSx0KXt0aGlzLmh0dHBQcm92aWRlcnNbZV18fHRoaXMuc2V0SHR0cFByb3ZpZGVyKGUsdCksdGhpcy5jaGFpbklkPWUsdGhpcy5ldmVudHMuZW1pdChmLkRFRkFVTFRfQ0hBSU5fQ0hBTkdFRCxgJHt0aGlzLm5hbWV9OiR7ZX1gKX1nZXREZWZhdWx0Q2hhaW4oKXtpZih0aGlzLmNoYWluSWQpcmV0dXJuIHRoaXMuY2hhaW5JZDtpZih0aGlzLm5hbWVzcGFjZS5kZWZhdWx0Q2hhaW4pcmV0dXJuIHRoaXMubmFtZXNwYWNlLmRlZmF1bHRDaGFpbjtjb25zdCBlPXRoaXMubmFtZXNwYWNlLmNoYWluc1swXTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJDaGFpbklkIG5vdCBmb3VuZFwiKTtyZXR1cm4gZS5zcGxpdChcIjpcIilbMV19Z2V0QWNjb3VudHMoKXtjb25zdCBlPXRoaXMubmFtZXNwYWNlLmFjY291bnRzO3JldHVybiBlP1suLi5uZXcgU2V0KGUuZmlsdGVyKHQ9PnQuc3BsaXQoXCI6XCIpWzFdPT09dGhpcy5jaGFpbklkLnRvU3RyaW5nKCkpLm1hcCh0PT50LnNwbGl0KFwiOlwiKVsyXSkpXTpbXX1jcmVhdGVIdHRwUHJvdmlkZXJzKCl7Y29uc3QgZT17fTtyZXR1cm4gdGhpcy5uYW1lc3BhY2UuY2hhaW5zLmZvckVhY2godD0+e3ZhciBpO2NvbnN0IHM9eSh0KTtlW3NdPXRoaXMuY3JlYXRlSHR0cFByb3ZpZGVyKHMsKGk9dGhpcy5uYW1lc3BhY2UucnBjTWFwKT09bnVsbD92b2lkIDA6aVt0XSl9KSxlfWdldEh0dHBQcm92aWRlcigpe2NvbnN0IGU9YCR7dGhpcy5uYW1lfToke3RoaXMuY2hhaW5JZH1gLHQ9dGhpcy5odHRwUHJvdmlkZXJzW2VdO2lmKHR5cGVvZiB0PlwidVwiKXRocm93IG5ldyBFcnJvcihgSlNPTi1SUEMgcHJvdmlkZXIgZm9yICR7ZX0gbm90IGZvdW5kYCk7cmV0dXJuIHR9c2V0SHR0cFByb3ZpZGVyKGUsdCl7Y29uc3QgaT10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcihlLHQpO2kmJih0aGlzLmh0dHBQcm92aWRlcnNbZV09aSl9Y3JlYXRlSHR0cFByb3ZpZGVyKGUsdCl7Y29uc3QgaT10fHx2KGUsdGhpcy5uYW1lc3BhY2UsdGhpcy5jbGllbnQuY29yZS5wcm9qZWN0SWQpO2lmKCFpKXRocm93IG5ldyBFcnJvcihgTm8gUlBDIHVybCBwcm92aWRlZCBmb3IgY2hhaW5JZDogJHtlfWApO3JldHVybiBuZXcgbShuZXcgYihpLGgoXCJkaXNhYmxlUHJvdmlkZXJQaW5nXCIpKSl9fXZhciBrYz1PYmplY3QuZGVmaW5lUHJvcGVydHksQmM9KHIsZSx0KT0+ZSBpbiByP2tjKHIsZSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pOnJbZV09dCxxPShyLGUsdCk9PkJjKHIsdHlwZW9mIGUhPVwic3ltYm9sXCI/ZStcIlwiOmUsdCk7Y2xhc3MgVmN7Y29uc3RydWN0b3IoZSl7cSh0aGlzLFwibmFtZVwiLFwibXVsdGl2ZXJzeFwiKSxxKHRoaXMsXCJjbGllbnRcIikscSh0aGlzLFwiaHR0cFByb3ZpZGVyc1wiKSxxKHRoaXMsXCJldmVudHNcIikscSh0aGlzLFwibmFtZXNwYWNlXCIpLHEodGhpcyxcImNoYWluSWRcIiksdGhpcy5uYW1lc3BhY2U9ZS5uYW1lc3BhY2UsdGhpcy5ldmVudHM9aChcImV2ZW50c1wiKSx0aGlzLmNsaWVudD1oKFwiY2xpZW50XCIpLHRoaXMuY2hhaW5JZD10aGlzLmdldERlZmF1bHRDaGFpbigpLHRoaXMuaHR0cFByb3ZpZGVycz10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcnMoKX11cGRhdGVOYW1lc3BhY2UoZSl7dGhpcy5uYW1lc3BhY2U9T2JqZWN0LmFzc2lnbih0aGlzLm5hbWVzcGFjZSxlKX1yZXF1ZXN0QWNjb3VudHMoKXtyZXR1cm4gdGhpcy5nZXRBY2NvdW50cygpfXJlcXVlc3QoZSl7cmV0dXJuIHRoaXMubmFtZXNwYWNlLm1ldGhvZHMuaW5jbHVkZXMoZS5yZXF1ZXN0Lm1ldGhvZCk/dGhpcy5jbGllbnQucmVxdWVzdChlKTp0aGlzLmdldEh0dHBQcm92aWRlcigpLnJlcXVlc3QoZS5yZXF1ZXN0KX1zZXREZWZhdWx0Q2hhaW4oZSx0KXt0aGlzLmh0dHBQcm92aWRlcnNbZV18fHRoaXMuc2V0SHR0cFByb3ZpZGVyKGUsdCksdGhpcy5jaGFpbklkPWUsdGhpcy5ldmVudHMuZW1pdChmLkRFRkFVTFRfQ0hBSU5fQ0hBTkdFRCxgJHt0aGlzLm5hbWV9OiR7ZX1gKX1nZXREZWZhdWx0Q2hhaW4oKXtpZih0aGlzLmNoYWluSWQpcmV0dXJuIHRoaXMuY2hhaW5JZDtpZih0aGlzLm5hbWVzcGFjZS5kZWZhdWx0Q2hhaW4pcmV0dXJuIHRoaXMubmFtZXNwYWNlLmRlZmF1bHRDaGFpbjtjb25zdCBlPXRoaXMubmFtZXNwYWNlLmNoYWluc1swXTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJDaGFpbklkIG5vdCBmb3VuZFwiKTtyZXR1cm4gZS5zcGxpdChcIjpcIilbMV19Z2V0QWNjb3VudHMoKXtjb25zdCBlPXRoaXMubmFtZXNwYWNlLmFjY291bnRzO3JldHVybiBlP1suLi5uZXcgU2V0KGUuZmlsdGVyKHQ9PnQuc3BsaXQoXCI6XCIpWzFdPT09dGhpcy5jaGFpbklkLnRvU3RyaW5nKCkpLm1hcCh0PT50LnNwbGl0KFwiOlwiKVsyXSkpXTpbXX1jcmVhdGVIdHRwUHJvdmlkZXJzKCl7Y29uc3QgZT17fTtyZXR1cm4gdGhpcy5uYW1lc3BhY2UuY2hhaW5zLmZvckVhY2godD0+e3ZhciBpO2NvbnN0IHM9eSh0KTtlW3NdPXRoaXMuY3JlYXRlSHR0cFByb3ZpZGVyKHMsKGk9dGhpcy5uYW1lc3BhY2UucnBjTWFwKT09bnVsbD92b2lkIDA6aVt0XSl9KSxlfWdldEh0dHBQcm92aWRlcigpe2NvbnN0IGU9YCR7dGhpcy5uYW1lfToke3RoaXMuY2hhaW5JZH1gLHQ9dGhpcy5odHRwUHJvdmlkZXJzW2VdO2lmKHR5cGVvZiB0PlwidVwiKXRocm93IG5ldyBFcnJvcihgSlNPTi1SUEMgcHJvdmlkZXIgZm9yICR7ZX0gbm90IGZvdW5kYCk7cmV0dXJuIHR9c2V0SHR0cFByb3ZpZGVyKGUsdCl7Y29uc3QgaT10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcihlLHQpO2kmJih0aGlzLmh0dHBQcm92aWRlcnNbZV09aSl9Y3JlYXRlSHR0cFByb3ZpZGVyKGUsdCl7Y29uc3QgaT10fHx2KGUsdGhpcy5uYW1lc3BhY2UsdGhpcy5jbGllbnQuY29yZS5wcm9qZWN0SWQpO2lmKCFpKXRocm93IG5ldyBFcnJvcihgTm8gUlBDIHVybCBwcm92aWRlZCBmb3IgY2hhaW5JZDogJHtlfWApO3JldHVybiBuZXcgbShuZXcgYihpLGgoXCJkaXNhYmxlUHJvdmlkZXJQaW5nXCIpKSl9fXZhciBKYz1PYmplY3QuZGVmaW5lUHJvcGVydHksS2M9KHIsZSx0KT0+ZSBpbiByP0pjKHIsZSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pOnJbZV09dCxSPShyLGUsdCk9PktjKHIsdHlwZW9mIGUhPVwic3ltYm9sXCI/ZStcIlwiOmUsdCk7Y2xhc3MgV2N7Y29uc3RydWN0b3IoZSl7Uih0aGlzLFwibmFtZVwiLFwibmVhclwiKSxSKHRoaXMsXCJjbGllbnRcIiksUih0aGlzLFwiaHR0cFByb3ZpZGVyc1wiKSxSKHRoaXMsXCJldmVudHNcIiksUih0aGlzLFwibmFtZXNwYWNlXCIpLFIodGhpcyxcImNoYWluSWRcIiksdGhpcy5uYW1lc3BhY2U9ZS5uYW1lc3BhY2UsdGhpcy5ldmVudHM9aChcImV2ZW50c1wiKSx0aGlzLmNsaWVudD1oKFwiY2xpZW50XCIpLHRoaXMuY2hhaW5JZD10aGlzLmdldERlZmF1bHRDaGFpbigpLHRoaXMuaHR0cFByb3ZpZGVycz10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcnMoKX11cGRhdGVOYW1lc3BhY2UoZSl7dGhpcy5uYW1lc3BhY2U9T2JqZWN0LmFzc2lnbih0aGlzLm5hbWVzcGFjZSxlKX1yZXF1ZXN0QWNjb3VudHMoKXtyZXR1cm4gdGhpcy5nZXRBY2NvdW50cygpfWdldERlZmF1bHRDaGFpbigpe2lmKHRoaXMuY2hhaW5JZClyZXR1cm4gdGhpcy5jaGFpbklkO2lmKHRoaXMubmFtZXNwYWNlLmRlZmF1bHRDaGFpbilyZXR1cm4gdGhpcy5uYW1lc3BhY2UuZGVmYXVsdENoYWluO2NvbnN0IGU9dGhpcy5uYW1lc3BhY2UuY2hhaW5zWzBdO2lmKCFlKXRocm93IG5ldyBFcnJvcihcIkNoYWluSWQgbm90IGZvdW5kXCIpO3JldHVybiBlLnNwbGl0KFwiOlwiKVsxXX1yZXF1ZXN0KGUpe3JldHVybiB0aGlzLm5hbWVzcGFjZS5tZXRob2RzLmluY2x1ZGVzKGUucmVxdWVzdC5tZXRob2QpP3RoaXMuY2xpZW50LnJlcXVlc3QoZSk6dGhpcy5nZXRIdHRwUHJvdmlkZXIoKS5yZXF1ZXN0KGUucmVxdWVzdCl9c2V0RGVmYXVsdENoYWluKGUsdCl7aWYodGhpcy5jaGFpbklkPWUsIXRoaXMuaHR0cFByb3ZpZGVyc1tlXSl7Y29uc3QgaT10fHx2KGAke3RoaXMubmFtZX06JHtlfWAsdGhpcy5uYW1lc3BhY2UpO2lmKCFpKXRocm93IG5ldyBFcnJvcihgTm8gUlBDIHVybCBwcm92aWRlZCBmb3IgY2hhaW5JZDogJHtlfWApO3RoaXMuc2V0SHR0cFByb3ZpZGVyKGUsaSl9dGhpcy5ldmVudHMuZW1pdChmLkRFRkFVTFRfQ0hBSU5fQ0hBTkdFRCxgJHt0aGlzLm5hbWV9OiR7dGhpcy5jaGFpbklkfWApfWdldEFjY291bnRzKCl7Y29uc3QgZT10aGlzLm5hbWVzcGFjZS5hY2NvdW50cztyZXR1cm4gZT9lLmZpbHRlcih0PT50LnNwbGl0KFwiOlwiKVsxXT09PXRoaXMuY2hhaW5JZC50b1N0cmluZygpKS5tYXAodD0+dC5zcGxpdChcIjpcIilbMl0pfHxbXTpbXX1jcmVhdGVIdHRwUHJvdmlkZXJzKCl7Y29uc3QgZT17fTtyZXR1cm4gdGhpcy5uYW1lc3BhY2UuY2hhaW5zLmZvckVhY2godD0+e3ZhciBpO2VbdF09dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXIodCwoaT10aGlzLm5hbWVzcGFjZS5ycGNNYXApPT1udWxsP3ZvaWQgMDppW3RdKX0pLGV9Z2V0SHR0cFByb3ZpZGVyKCl7Y29uc3QgZT1gJHt0aGlzLm5hbWV9OiR7dGhpcy5jaGFpbklkfWAsdD10aGlzLmh0dHBQcm92aWRlcnNbZV07aWYodHlwZW9mIHQ+XCJ1XCIpdGhyb3cgbmV3IEVycm9yKGBKU09OLVJQQyBwcm92aWRlciBmb3IgJHtlfSBub3QgZm91bmRgKTtyZXR1cm4gdH1zZXRIdHRwUHJvdmlkZXIoZSx0KXtjb25zdCBpPXRoaXMuY3JlYXRlSHR0cFByb3ZpZGVyKGUsdCk7aSYmKHRoaXMuaHR0cFByb3ZpZGVyc1tlXT1pKX1jcmVhdGVIdHRwUHJvdmlkZXIoZSx0KXtjb25zdCBpPXR8fHYoZSx0aGlzLm5hbWVzcGFjZSk7cmV0dXJuIHR5cGVvZiBpPlwidVwiP3ZvaWQgMDpuZXcgbShuZXcgYihpLGgoXCJkaXNhYmxlUHJvdmlkZXJQaW5nXCIpKSl9fXZhciBYYz1PYmplY3QuZGVmaW5lUHJvcGVydHksWWM9KHIsZSx0KT0+ZSBpbiByP1hjKHIsZSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pOnJbZV09dCx4PShyLGUsdCk9PlljKHIsdHlwZW9mIGUhPVwic3ltYm9sXCI/ZStcIlwiOmUsdCk7Y2xhc3MgWmN7Y29uc3RydWN0b3IoZSl7eCh0aGlzLFwibmFtZVwiLFwidGV6b3NcIikseCh0aGlzLFwiY2xpZW50XCIpLHgodGhpcyxcImh0dHBQcm92aWRlcnNcIikseCh0aGlzLFwiZXZlbnRzXCIpLHgodGhpcyxcIm5hbWVzcGFjZVwiKSx4KHRoaXMsXCJjaGFpbklkXCIpLHRoaXMubmFtZXNwYWNlPWUubmFtZXNwYWNlLHRoaXMuZXZlbnRzPWgoXCJldmVudHNcIiksdGhpcy5jbGllbnQ9aChcImNsaWVudFwiKSx0aGlzLmNoYWluSWQ9dGhpcy5nZXREZWZhdWx0Q2hhaW4oKSx0aGlzLmh0dHBQcm92aWRlcnM9dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXJzKCl9dXBkYXRlTmFtZXNwYWNlKGUpe3RoaXMubmFtZXNwYWNlPU9iamVjdC5hc3NpZ24odGhpcy5uYW1lc3BhY2UsZSl9cmVxdWVzdEFjY291bnRzKCl7cmV0dXJuIHRoaXMuZ2V0QWNjb3VudHMoKX1nZXREZWZhdWx0Q2hhaW4oKXtpZih0aGlzLmNoYWluSWQpcmV0dXJuIHRoaXMuY2hhaW5JZDtpZih0aGlzLm5hbWVzcGFjZS5kZWZhdWx0Q2hhaW4pcmV0dXJuIHRoaXMubmFtZXNwYWNlLmRlZmF1bHRDaGFpbjtjb25zdCBlPXRoaXMubmFtZXNwYWNlLmNoYWluc1swXTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJDaGFpbklkIG5vdCBmb3VuZFwiKTtyZXR1cm4gZS5zcGxpdChcIjpcIilbMV19cmVxdWVzdChlKXtyZXR1cm4gdGhpcy5uYW1lc3BhY2UubWV0aG9kcy5pbmNsdWRlcyhlLnJlcXVlc3QubWV0aG9kKT90aGlzLmNsaWVudC5yZXF1ZXN0KGUpOnRoaXMuZ2V0SHR0cFByb3ZpZGVyKCkucmVxdWVzdChlLnJlcXVlc3QpfXNldERlZmF1bHRDaGFpbihlLHQpe2lmKHRoaXMuY2hhaW5JZD1lLCF0aGlzLmh0dHBQcm92aWRlcnNbZV0pe2NvbnN0IGk9dHx8dihgJHt0aGlzLm5hbWV9OiR7ZX1gLHRoaXMubmFtZXNwYWNlKTtpZighaSl0aHJvdyBuZXcgRXJyb3IoYE5vIFJQQyB1cmwgcHJvdmlkZWQgZm9yIGNoYWluSWQ6ICR7ZX1gKTt0aGlzLnNldEh0dHBQcm92aWRlcihlLGkpfXRoaXMuZXZlbnRzLmVtaXQoZi5ERUZBVUxUX0NIQUlOX0NIQU5HRUQsYCR7dGhpcy5uYW1lfToke3RoaXMuY2hhaW5JZH1gKX1nZXRBY2NvdW50cygpe2NvbnN0IGU9dGhpcy5uYW1lc3BhY2UuYWNjb3VudHM7cmV0dXJuIGU/ZS5maWx0ZXIodD0+dC5zcGxpdChcIjpcIilbMV09PT10aGlzLmNoYWluSWQudG9TdHJpbmcoKSkubWFwKHQ9PnQuc3BsaXQoXCI6XCIpWzJdKXx8W106W119Y3JlYXRlSHR0cFByb3ZpZGVycygpe2NvbnN0IGU9e307cmV0dXJuIHRoaXMubmFtZXNwYWNlLmNoYWlucy5mb3JFYWNoKHQ9PntlW3RdPXRoaXMuY3JlYXRlSHR0cFByb3ZpZGVyKHQpfSksZX1nZXRIdHRwUHJvdmlkZXIoKXtjb25zdCBlPWAke3RoaXMubmFtZX06JHt0aGlzLmNoYWluSWR9YCx0PXRoaXMuaHR0cFByb3ZpZGVyc1tlXTtpZih0eXBlb2YgdD5cInVcIil0aHJvdyBuZXcgRXJyb3IoYEpTT04tUlBDIHByb3ZpZGVyIGZvciAke2V9IG5vdCBmb3VuZGApO3JldHVybiB0fXNldEh0dHBQcm92aWRlcihlLHQpe2NvbnN0IGk9dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXIoZSx0KTtpJiYodGhpcy5odHRwUHJvdmlkZXJzW2VdPWkpfWNyZWF0ZUh0dHBQcm92aWRlcihlLHQpe2NvbnN0IGk9dHx8dihlLHRoaXMubmFtZXNwYWNlKTtyZXR1cm4gdHlwZW9mIGk+XCJ1XCI/dm9pZCAwOm5ldyBtKG5ldyBiKGkpKX19dmFyIFFjPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxlaD0ocixlLHQpPT5lIGluIHI/UWMocixlLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp0fSk6cltlXT10LEw9KHIsZSx0KT0+ZWgocix0eXBlb2YgZSE9XCJzeW1ib2xcIj9lK1wiXCI6ZSx0KTtjbGFzcyB0aHtjb25zdHJ1Y3RvcihlKXtMKHRoaXMsXCJuYW1lXCIsdyksTCh0aGlzLFwiY2xpZW50XCIpLEwodGhpcyxcImh0dHBQcm92aWRlcnNcIiksTCh0aGlzLFwiZXZlbnRzXCIpLEwodGhpcyxcIm5hbWVzcGFjZVwiKSxMKHRoaXMsXCJjaGFpbklkXCIpLHRoaXMubmFtZXNwYWNlPWUubmFtZXNwYWNlLHRoaXMuZXZlbnRzPWgoXCJldmVudHNcIiksdGhpcy5jbGllbnQ9aChcImNsaWVudFwiKSx0aGlzLmNoYWluSWQ9dGhpcy5nZXREZWZhdWx0Q2hhaW4oKSx0aGlzLmh0dHBQcm92aWRlcnM9dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXJzKCl9dXBkYXRlTmFtZXNwYWNlKGUpe3RoaXMubmFtZXNwYWNlLmNoYWlucz1bLi4ubmV3IFNldCgodGhpcy5uYW1lc3BhY2UuY2hhaW5zfHxbXSkuY29uY2F0KGUuY2hhaW5zfHxbXSkpXSx0aGlzLm5hbWVzcGFjZS5hY2NvdW50cz1bLi4ubmV3IFNldCgodGhpcy5uYW1lc3BhY2UuYWNjb3VudHN8fFtdKS5jb25jYXQoZS5hY2NvdW50c3x8W10pKV0sdGhpcy5uYW1lc3BhY2UubWV0aG9kcz1bLi4ubmV3IFNldCgodGhpcy5uYW1lc3BhY2UubWV0aG9kc3x8W10pLmNvbmNhdChlLm1ldGhvZHN8fFtdKSldLHRoaXMubmFtZXNwYWNlLmV2ZW50cz1bLi4ubmV3IFNldCgodGhpcy5uYW1lc3BhY2UuZXZlbnRzfHxbXSkuY29uY2F0KGUuZXZlbnRzfHxbXSkpXSx0aGlzLmh0dHBQcm92aWRlcnM9dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXJzKCl9cmVxdWVzdEFjY291bnRzKCl7cmV0dXJuIHRoaXMuZ2V0QWNjb3VudHMoKX1yZXF1ZXN0KGUpe3JldHVybiB0aGlzLm5hbWVzcGFjZS5tZXRob2RzLmluY2x1ZGVzKGUucmVxdWVzdC5tZXRob2QpP3RoaXMuY2xpZW50LnJlcXVlc3QoZSk6dGhpcy5nZXRIdHRwUHJvdmlkZXIoZS5jaGFpbklkKS5yZXF1ZXN0KGUucmVxdWVzdCl9c2V0RGVmYXVsdENoYWluKGUsdCl7dGhpcy5odHRwUHJvdmlkZXJzW2VdfHx0aGlzLnNldEh0dHBQcm92aWRlcihlLHQpLHRoaXMuY2hhaW5JZD1lLHRoaXMuZXZlbnRzLmVtaXQoZi5ERUZBVUxUX0NIQUlOX0NIQU5HRUQsYCR7dGhpcy5uYW1lfToke2V9YCl9Z2V0RGVmYXVsdENoYWluKCl7aWYodGhpcy5jaGFpbklkKXJldHVybiB0aGlzLmNoYWluSWQ7aWYodGhpcy5uYW1lc3BhY2UuZGVmYXVsdENoYWluKXJldHVybiB0aGlzLm5hbWVzcGFjZS5kZWZhdWx0Q2hhaW47Y29uc3QgZT10aGlzLm5hbWVzcGFjZS5jaGFpbnNbMF07aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiQ2hhaW5JZCBub3QgZm91bmRcIik7cmV0dXJuIGUuc3BsaXQoXCI6XCIpWzFdfWdldEFjY291bnRzKCl7Y29uc3QgZT10aGlzLm5hbWVzcGFjZS5hY2NvdW50cztyZXR1cm4gZT9bLi4ubmV3IFNldChlLmZpbHRlcih0PT50LnNwbGl0KFwiOlwiKVsxXT09PXRoaXMuY2hhaW5JZC50b1N0cmluZygpKS5tYXAodD0+dC5zcGxpdChcIjpcIilbMl0pKV06W119Y3JlYXRlSHR0cFByb3ZpZGVycygpe3ZhciBlLHQ7Y29uc3QgaT17fTtyZXR1cm4odD0oZT10aGlzLm5hbWVzcGFjZSk9PW51bGw/dm9pZCAwOmUuYWNjb3VudHMpPT1udWxsfHx0LmZvckVhY2gocz0+e2NvbnN0IG49bWUocyk7aVtgJHtuLm5hbWVzcGFjZX06JHtuLnJlZmVyZW5jZX1gXT10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcihzKX0pLGl9Z2V0SHR0cFByb3ZpZGVyKGUpe2NvbnN0IHQ9dGhpcy5odHRwUHJvdmlkZXJzW2VdO2lmKHR5cGVvZiB0PlwidVwiKXRocm93IG5ldyBFcnJvcihgSlNPTi1SUEMgcHJvdmlkZXIgZm9yICR7ZX0gbm90IGZvdW5kYCk7cmV0dXJuIHR9c2V0SHR0cFByb3ZpZGVyKGUsdCl7Y29uc3QgaT10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcihlLHQpO2kmJih0aGlzLmh0dHBQcm92aWRlcnNbZV09aSl9Y3JlYXRlSHR0cFByb3ZpZGVyKGUsdCl7Y29uc3QgaT10fHx2KGUsdGhpcy5uYW1lc3BhY2UsdGhpcy5jbGllbnQuY29yZS5wcm9qZWN0SWQpO2lmKCFpKXRocm93IG5ldyBFcnJvcihgTm8gUlBDIHVybCBwcm92aWRlZCBmb3IgY2hhaW5JZDogJHtlfWApO3JldHVybiBuZXcgbShuZXcgYihpLGgoXCJkaXNhYmxlUHJvdmlkZXJQaW5nXCIpKSl9fXZhciByaD1PYmplY3QuZGVmaW5lUHJvcGVydHksaWg9T2JqZWN0LmRlZmluZVByb3BlcnRpZXMsc2g9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMsdnQ9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxuaD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGFoPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsbGU9KHIsZSx0KT0+ZSBpbiByP3JoKHIsZSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pOnJbZV09dCxZPShyLGUpPT57Zm9yKHZhciB0IGluIGV8fChlPXt9KSluaC5jYWxsKGUsdCkmJmxlKHIsdCxlW3RdKTtpZih2dClmb3IodmFyIHQgb2YgdnQoZSkpYWguY2FsbChlLHQpJiZsZShyLHQsZVt0XSk7cmV0dXJuIHJ9LGRlPShyLGUpPT5paChyLHNoKGUpKSxnPShyLGUsdCk9PmxlKHIsdHlwZW9mIGUhPVwic3ltYm9sXCI/ZStcIlwiOmUsdCk7Y2xhc3MgWntjb25zdHJ1Y3RvcihlKXtnKHRoaXMsXCJjbGllbnRcIiksZyh0aGlzLFwibmFtZXNwYWNlc1wiKSxnKHRoaXMsXCJvcHRpb25hbE5hbWVzcGFjZXNcIiksZyh0aGlzLFwic2Vzc2lvblByb3BlcnRpZXNcIiksZyh0aGlzLFwiZXZlbnRzXCIsbmV3IHd0KSxnKHRoaXMsXCJycGNQcm92aWRlcnNcIix7fSksZyh0aGlzLFwic2Vzc2lvblwiKSxnKHRoaXMsXCJwcm92aWRlck9wdHNcIiksZyh0aGlzLFwibG9nZ2VyXCIpLGcodGhpcyxcInVyaVwiKSxnKHRoaXMsXCJkaXNhYmxlUHJvdmlkZXJQaW5nXCIsITEpLHRoaXMucHJvdmlkZXJPcHRzPWUsdGhpcy5sb2dnZXI9dHlwZW9mIGU/LmxvZ2dlcjxcInVcIiYmdHlwZW9mIGU/LmxvZ2dlciE9XCJzdHJpbmdcIj9lLmxvZ2dlcjpndChQdCh7bGV2ZWw6ZT8ubG9nZ2VyfHxiZX0pKSx0aGlzLmRpc2FibGVQcm92aWRlclBpbmc9ZT8uZGlzYWJsZVByb3ZpZGVyUGluZ3x8ITF9c3RhdGljIGFzeW5jIGluaXQoZSl7Y29uc3QgdD1uZXcgWihlKTtyZXR1cm4gYXdhaXQgdC5pbml0aWFsaXplKCksdH1hc3luYyByZXF1ZXN0KGUsdCxpKXtjb25zdFtzLG5dPXRoaXMudmFsaWRhdGVDaGFpbih0KTtpZighdGhpcy5zZXNzaW9uKXRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBjYWxsIGNvbm5lY3QoKSBiZWZvcmUgcmVxdWVzdCgpXCIpO3JldHVybiBhd2FpdCB0aGlzLmdldFByb3ZpZGVyKHMpLnJlcXVlc3Qoe3JlcXVlc3Q6WSh7fSxlKSxjaGFpbklkOmAke3N9OiR7bn1gLHRvcGljOnRoaXMuc2Vzc2lvbi50b3BpYyxleHBpcnk6aX0pfXNlbmRBc3luYyhlLHQsaSxzKXtjb25zdCBuPW5ldyBEYXRlKCkuZ2V0VGltZSgpO3RoaXMucmVxdWVzdChlLGkscykudGhlbihhPT50KG51bGwseXQobixhKSkpLmNhdGNoKGE9PnQoYSx2b2lkIDApKX1hc3luYyBlbmFibGUoKXtpZighdGhpcy5jbGllbnQpdGhyb3cgbmV3IEVycm9yKFwiU2lnbiBDbGllbnQgbm90IGluaXRpYWxpemVkXCIpO3JldHVybiB0aGlzLnNlc3Npb258fGF3YWl0IHRoaXMuY29ubmVjdCh7bmFtZXNwYWNlczp0aGlzLm5hbWVzcGFjZXMsb3B0aW9uYWxOYW1lc3BhY2VzOnRoaXMub3B0aW9uYWxOYW1lc3BhY2VzLHNlc3Npb25Qcm9wZXJ0aWVzOnRoaXMuc2Vzc2lvblByb3BlcnRpZXN9KSxhd2FpdCB0aGlzLnJlcXVlc3RBY2NvdW50cygpfWFzeW5jIGRpc2Nvbm5lY3QoKXt2YXIgZTtpZighdGhpcy5zZXNzaW9uKXRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBjYWxsIGNvbm5lY3QoKSBiZWZvcmUgZW5hYmxlKClcIik7YXdhaXQgdGhpcy5jbGllbnQuZGlzY29ubmVjdCh7dG9waWM6KGU9dGhpcy5zZXNzaW9uKT09bnVsbD92b2lkIDA6ZS50b3BpYyxyZWFzb246Z2UoXCJVU0VSX0RJU0NPTk5FQ1RFRFwiKX0pLGF3YWl0IHRoaXMuY2xlYW51cCgpfWFzeW5jIGNvbm5lY3QoZSl7aWYoIXRoaXMuY2xpZW50KXRocm93IG5ldyBFcnJvcihcIlNpZ24gQ2xpZW50IG5vdCBpbml0aWFsaXplZFwiKTtpZih0aGlzLnNldE5hbWVzcGFjZXMoZSksYXdhaXQgdGhpcy5jbGVhbnVwUGVuZGluZ1BhaXJpbmdzKCksIWUuc2tpcFBhaXJpbmcpcmV0dXJuIGF3YWl0IHRoaXMucGFpcihlLnBhaXJpbmdUb3BpYyl9YXN5bmMgYXV0aGVudGljYXRlKGUsdCl7aWYoIXRoaXMuY2xpZW50KXRocm93IG5ldyBFcnJvcihcIlNpZ24gQ2xpZW50IG5vdCBpbml0aWFsaXplZFwiKTt0aGlzLnNldE5hbWVzcGFjZXMoZSksYXdhaXQgdGhpcy5jbGVhbnVwUGVuZGluZ1BhaXJpbmdzKCk7Y29uc3R7dXJpOmkscmVzcG9uc2U6c309YXdhaXQgdGhpcy5jbGllbnQuYXV0aGVudGljYXRlKGUsdCk7aSYmKHRoaXMudXJpPWksdGhpcy5ldmVudHMuZW1pdChcImRpc3BsYXlfdXJpXCIsaSkpO2NvbnN0IG49YXdhaXQgcygpO2lmKHRoaXMuc2Vzc2lvbj1uLnNlc3Npb24sdGhpcy5zZXNzaW9uKXtjb25zdCBhPWh0KHRoaXMuc2Vzc2lvbi5uYW1lc3BhY2VzKTt0aGlzLm5hbWVzcGFjZXM9Y2UodGhpcy5uYW1lc3BhY2VzLGEpLHRoaXMucGVyc2lzdChcIm5hbWVzcGFjZXNcIix0aGlzLm5hbWVzcGFjZXMpLHRoaXMub25Db25uZWN0KCl9cmV0dXJuIG59b24oZSx0KXt0aGlzLmV2ZW50cy5vbihlLHQpfW9uY2UoZSx0KXt0aGlzLmV2ZW50cy5vbmNlKGUsdCl9cmVtb3ZlTGlzdGVuZXIoZSx0KXt0aGlzLmV2ZW50cy5yZW1vdmVMaXN0ZW5lcihlLHQpfW9mZihlLHQpe3RoaXMuZXZlbnRzLm9mZihlLHQpfWdldCBpc1dhbGxldENvbm5lY3QoKXtyZXR1cm4hMH1hc3luYyBwYWlyKGUpe2NvbnN0e3VyaTp0LGFwcHJvdmFsOml9PWF3YWl0IHRoaXMuY2xpZW50LmNvbm5lY3Qoe3BhaXJpbmdUb3BpYzplLHJlcXVpcmVkTmFtZXNwYWNlczp0aGlzLm5hbWVzcGFjZXMsb3B0aW9uYWxOYW1lc3BhY2VzOnRoaXMub3B0aW9uYWxOYW1lc3BhY2VzLHNlc3Npb25Qcm9wZXJ0aWVzOnRoaXMuc2Vzc2lvblByb3BlcnRpZXN9KTt0JiYodGhpcy51cmk9dCx0aGlzLmV2ZW50cy5lbWl0KFwiZGlzcGxheV91cmlcIix0KSk7Y29uc3Qgcz1hd2FpdCBpKCk7dGhpcy5zZXNzaW9uPXM7Y29uc3Qgbj1odChzLm5hbWVzcGFjZXMpO3JldHVybiB0aGlzLm5hbWVzcGFjZXM9Y2UodGhpcy5uYW1lc3BhY2VzLG4pLHRoaXMucGVyc2lzdChcIm5hbWVzcGFjZXNcIix0aGlzLm5hbWVzcGFjZXMpLHRoaXMub25Db25uZWN0KCksdGhpcy5zZXNzaW9ufXNldERlZmF1bHRDaGFpbihlLHQpe3RyeXtpZighdGhpcy5zZXNzaW9uKXJldHVybjtjb25zdFtpLHNdPXRoaXMudmFsaWRhdGVDaGFpbihlKSxuPXRoaXMuZ2V0UHJvdmlkZXIoaSk7bi5uYW1lPT09dz9uLnNldERlZmF1bHRDaGFpbihgJHtpfToke3N9YCx0KTpuLnNldERlZmF1bHRDaGFpbihzLHQpfWNhdGNoKGkpe2lmKCEvUGxlYXNlIGNhbGwgY29ubmVjdC8udGVzdChpLm1lc3NhZ2UpKXRocm93IGl9fWFzeW5jIGNsZWFudXBQZW5kaW5nUGFpcmluZ3MoZT17fSl7dGhpcy5sb2dnZXIuaW5mbyhcIkNsZWFuaW5nIHVwIGluYWN0aXZlIHBhaXJpbmdzLi4uXCIpO2NvbnN0IHQ9dGhpcy5jbGllbnQucGFpcmluZy5nZXRBbGwoKTtpZihQZSh0KSl7Zm9yKGNvbnN0IGkgb2YgdCllLmRlbGV0ZVBhaXJpbmdzP3RoaXMuY2xpZW50LmNvcmUuZXhwaXJlci5zZXQoaS50b3BpYywwKTphd2FpdCB0aGlzLmNsaWVudC5jb3JlLnJlbGF5ZXIuc3Vic2NyaWJlci51bnN1YnNjcmliZShpLnRvcGljKTt0aGlzLmxvZ2dlci5pbmZvKGBJbmFjdGl2ZSBwYWlyaW5ncyBjbGVhcmVkOiAke3QubGVuZ3RofWApfX1hYm9ydFBhaXJpbmdBdHRlbXB0KCl7dGhpcy5sb2dnZXIud2FybihcImFib3J0UGFpcmluZ0F0dGVtcHQgaXMgZGVwcmVjYXRlZC4gVGhpcyBpcyBub3cgYSBuby1vcC5cIil9YXN5bmMgY2hlY2tTdG9yYWdlKCl7aWYodGhpcy5uYW1lc3BhY2VzPWF3YWl0IHRoaXMuZ2V0RnJvbVN0b3JlKFwibmFtZXNwYWNlc1wiKSx0aGlzLm9wdGlvbmFsTmFtZXNwYWNlcz1hd2FpdCB0aGlzLmdldEZyb21TdG9yZShcIm9wdGlvbmFsTmFtZXNwYWNlc1wiKXx8e30sdGhpcy5jbGllbnQuc2Vzc2lvbi5sZW5ndGgpe2NvbnN0IGU9dGhpcy5jbGllbnQuc2Vzc2lvbi5rZXlzLmxlbmd0aC0xO3RoaXMuc2Vzc2lvbj10aGlzLmNsaWVudC5zZXNzaW9uLmdldCh0aGlzLmNsaWVudC5zZXNzaW9uLmtleXNbZV0pLHRoaXMuY3JlYXRlUHJvdmlkZXJzKCl9fWFzeW5jIGluaXRpYWxpemUoKXt0aGlzLmxvZ2dlci50cmFjZShcIkluaXRpYWxpemVkXCIpLGF3YWl0IHRoaXMuY3JlYXRlQ2xpZW50KCksYXdhaXQgdGhpcy5jaGVja1N0b3JhZ2UoKSx0aGlzLnJlZ2lzdGVyRXZlbnRMaXN0ZW5lcnMoKX1hc3luYyBjcmVhdGVDbGllbnQoKXt0aGlzLmNsaWVudD10aGlzLnByb3ZpZGVyT3B0cy5jbGllbnR8fGF3YWl0IGZ0LmluaXQoe2NvcmU6dGhpcy5wcm92aWRlck9wdHMuY29yZSxsb2dnZXI6dGhpcy5wcm92aWRlck9wdHMubG9nZ2VyfHxiZSxyZWxheVVybDp0aGlzLnByb3ZpZGVyT3B0cy5yZWxheVVybHx8X3QscHJvamVjdElkOnRoaXMucHJvdmlkZXJPcHRzLnByb2plY3RJZCxtZXRhZGF0YTp0aGlzLnByb3ZpZGVyT3B0cy5tZXRhZGF0YSxzdG9yYWdlT3B0aW9uczp0aGlzLnByb3ZpZGVyT3B0cy5zdG9yYWdlT3B0aW9ucyxzdG9yYWdlOnRoaXMucHJvdmlkZXJPcHRzLnN0b3JhZ2UsbmFtZTp0aGlzLnByb3ZpZGVyT3B0cy5uYW1lLGN1c3RvbVN0b3JhZ2VQcmVmaXg6dGhpcy5wcm92aWRlck9wdHMuY3VzdG9tU3RvcmFnZVByZWZpeCx0ZWxlbWV0cnlFbmFibGVkOnRoaXMucHJvdmlkZXJPcHRzLnRlbGVtZXRyeUVuYWJsZWR9KSx0aGlzLmxvZ2dlci50cmFjZShcIlNpZ25DbGllbnQgSW5pdGlhbGl6ZWRcIil9Y3JlYXRlUHJvdmlkZXJzKCl7aWYoIXRoaXMuY2xpZW50KXRocm93IG5ldyBFcnJvcihcIlNpZ24gQ2xpZW50IG5vdCBpbml0aWFsaXplZFwiKTtpZighdGhpcy5zZXNzaW9uKXRocm93IG5ldyBFcnJvcihcIlNlc3Npb24gbm90IGluaXRpYWxpemVkLiBQbGVhc2UgY2FsbCBjb25uZWN0KCkgYmVmb3JlIGVuYWJsZSgpXCIpO2NvbnN0IGU9Wy4uLm5ldyBTZXQoT2JqZWN0LmtleXModGhpcy5zZXNzaW9uLm5hbWVzcGFjZXMpLm1hcCh0PT5VKHQpKSldO3BlKFwiY2xpZW50XCIsdGhpcy5jbGllbnQpLHBlKFwiZXZlbnRzXCIsdGhpcy5ldmVudHMpLHBlKFwiZGlzYWJsZVByb3ZpZGVyUGluZ1wiLHRoaXMuZGlzYWJsZVByb3ZpZGVyUGluZyksZS5mb3JFYWNoKHQ9PntpZighdGhpcy5zZXNzaW9uKXJldHVybjtjb25zdCBpPVBjKHQsdGhpcy5zZXNzaW9uKSxzPW90KGkpLG49Y2UodGhpcy5uYW1lc3BhY2VzLHRoaXMub3B0aW9uYWxOYW1lc3BhY2VzKSxhPWRlKFkoe30sblt0XSkse2FjY291bnRzOmksY2hhaW5zOnN9KTtzd2l0Y2godCl7Y2FzZVwiZWlwMTU1XCI6dGhpcy5ycGNQcm92aWRlcnNbdF09bmV3IGpjKHtuYW1lc3BhY2U6YX0pO2JyZWFrO2Nhc2VcImFsZ29yYW5kXCI6dGhpcy5ycGNQcm92aWRlcnNbdF09bmV3IHhjKHtuYW1lc3BhY2U6YX0pO2JyZWFrO2Nhc2VcInNvbGFuYVwiOnRoaXMucnBjUHJvdmlkZXJzW3RdPW5ldyBTYyh7bmFtZXNwYWNlOmF9KTticmVhaztjYXNlXCJjb3Ntb3NcIjp0aGlzLnJwY1Byb3ZpZGVyc1t0XT1uZXcgRGMoe25hbWVzcGFjZTphfSk7YnJlYWs7Y2FzZVwicG9sa2Fkb3RcIjp0aGlzLnJwY1Byb3ZpZGVyc1t0XT1uZXcgd2Moe25hbWVzcGFjZTphfSk7YnJlYWs7Y2FzZVwiY2lwMzRcIjp0aGlzLnJwY1Byb3ZpZGVyc1t0XT1uZXcgRmMoe25hbWVzcGFjZTphfSk7YnJlYWs7Y2FzZVwiZWxyb25kXCI6dGhpcy5ycGNQcm92aWRlcnNbdF09bmV3IHpjKHtuYW1lc3BhY2U6YX0pO2JyZWFrO2Nhc2VcIm11bHRpdmVyc3hcIjp0aGlzLnJwY1Byb3ZpZGVyc1t0XT1uZXcgVmMoe25hbWVzcGFjZTphfSk7YnJlYWs7Y2FzZVwibmVhclwiOnRoaXMucnBjUHJvdmlkZXJzW3RdPW5ldyBXYyh7bmFtZXNwYWNlOmF9KTticmVhaztjYXNlXCJ0ZXpvc1wiOnRoaXMucnBjUHJvdmlkZXJzW3RdPW5ldyBaYyh7bmFtZXNwYWNlOmF9KTticmVhaztkZWZhdWx0OnRoaXMucnBjUHJvdmlkZXJzW3ddP3RoaXMucnBjUHJvdmlkZXJzW3ddLnVwZGF0ZU5hbWVzcGFjZShhKTp0aGlzLnJwY1Byb3ZpZGVyc1t3XT1uZXcgdGgoe25hbWVzcGFjZTphfSl9fSl9cmVnaXN0ZXJFdmVudExpc3RlbmVycygpe2lmKHR5cGVvZiB0aGlzLmNsaWVudD5cInVcIil0aHJvdyBuZXcgRXJyb3IoXCJTaWduIENsaWVudCBpcyBub3QgaW5pdGlhbGl6ZWRcIik7dGhpcy5jbGllbnQub24oXCJzZXNzaW9uX3BpbmdcIixlPT57dGhpcy5ldmVudHMuZW1pdChcInNlc3Npb25fcGluZ1wiLGUpfSksdGhpcy5jbGllbnQub24oXCJzZXNzaW9uX2V2ZW50XCIsZT0+e2NvbnN0e3BhcmFtczp0fT1lLHtldmVudDppfT10O2lmKGkubmFtZT09PVwiYWNjb3VudHNDaGFuZ2VkXCIpe2NvbnN0IHM9aS5kYXRhO3MmJlBlKHMpJiZ0aGlzLmV2ZW50cy5lbWl0KFwiYWNjb3VudHNDaGFuZ2VkXCIscy5tYXAoYmMpKX1lbHNlIGlmKGkubmFtZT09PVwiY2hhaW5DaGFuZ2VkXCIpe2NvbnN0IHM9dC5jaGFpbklkLG49dC5ldmVudC5kYXRhLGE9VShzKSxvPWhlKHMpIT09aGUobik/YCR7YX06JHtoZShuKX1gOnM7dGhpcy5vbkNoYWluQ2hhbmdlZChvKX1lbHNlIHRoaXMuZXZlbnRzLmVtaXQoaS5uYW1lLGkuZGF0YSk7dGhpcy5ldmVudHMuZW1pdChcInNlc3Npb25fZXZlbnRcIixlKX0pLHRoaXMuY2xpZW50Lm9uKFwic2Vzc2lvbl91cGRhdGVcIiwoe3RvcGljOmUscGFyYW1zOnR9KT0+e3ZhciBpO2NvbnN0e25hbWVzcGFjZXM6c309dCxuPShpPXRoaXMuY2xpZW50KT09bnVsbD92b2lkIDA6aS5zZXNzaW9uLmdldChlKTt0aGlzLnNlc3Npb249ZGUoWSh7fSxuKSx7bmFtZXNwYWNlczpzfSksdGhpcy5vblNlc3Npb25VcGRhdGUoKSx0aGlzLmV2ZW50cy5lbWl0KFwic2Vzc2lvbl91cGRhdGVcIix7dG9waWM6ZSxwYXJhbXM6dH0pfSksdGhpcy5jbGllbnQub24oXCJzZXNzaW9uX2RlbGV0ZVwiLGFzeW5jIGU9Pnthd2FpdCB0aGlzLmNsZWFudXAoKSx0aGlzLmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9kZWxldGVcIixlKSx0aGlzLmV2ZW50cy5lbWl0KFwiZGlzY29ubmVjdFwiLGRlKFkoe30sZ2UoXCJVU0VSX0RJU0NPTk5FQ1RFRFwiKSkse2RhdGE6ZS50b3BpY30pKX0pLHRoaXMub24oZi5ERUZBVUxUX0NIQUlOX0NIQU5HRUQsZT0+e3RoaXMub25DaGFpbkNoYW5nZWQoZSwhMCl9KX1nZXRQcm92aWRlcihlKXtyZXR1cm4gdGhpcy5ycGNQcm92aWRlcnNbZV18fHRoaXMucnBjUHJvdmlkZXJzW3ddfW9uU2Vzc2lvblVwZGF0ZSgpe09iamVjdC5rZXlzKHRoaXMucnBjUHJvdmlkZXJzKS5mb3JFYWNoKGU9Pnt2YXIgdDt0aGlzLmdldFByb3ZpZGVyKGUpLnVwZGF0ZU5hbWVzcGFjZSgodD10aGlzLnNlc3Npb24pPT1udWxsP3ZvaWQgMDp0Lm5hbWVzcGFjZXNbZV0pfSl9c2V0TmFtZXNwYWNlcyhlKXtjb25zdHtuYW1lc3BhY2VzOnQsb3B0aW9uYWxOYW1lc3BhY2VzOmksc2Vzc2lvblByb3BlcnRpZXM6c309ZTt0JiZPYmplY3Qua2V5cyh0KS5sZW5ndGgmJih0aGlzLm5hbWVzcGFjZXM9dCksaSYmT2JqZWN0LmtleXMoaSkubGVuZ3RoJiYodGhpcy5vcHRpb25hbE5hbWVzcGFjZXM9aSksdGhpcy5zZXNzaW9uUHJvcGVydGllcz1zLHRoaXMucGVyc2lzdChcIm5hbWVzcGFjZXNcIix0KSx0aGlzLnBlcnNpc3QoXCJvcHRpb25hbE5hbWVzcGFjZXNcIixpKX12YWxpZGF0ZUNoYWluKGUpe2NvbnN0W3QsaV09ZT8uc3BsaXQoXCI6XCIpfHxbXCJcIixcIlwiXTtpZighdGhpcy5uYW1lc3BhY2VzfHwhT2JqZWN0LmtleXModGhpcy5uYW1lc3BhY2VzKS5sZW5ndGgpcmV0dXJuW3QsaV07aWYodCYmIU9iamVjdC5rZXlzKHRoaXMubmFtZXNwYWNlc3x8e30pLm1hcChhPT5VKGEpKS5pbmNsdWRlcyh0KSl0aHJvdyBuZXcgRXJyb3IoYE5hbWVzcGFjZSAnJHt0fScgaXMgbm90IGNvbmZpZ3VyZWQuIFBsZWFzZSBjYWxsIGNvbm5lY3QoKSBmaXJzdCB3aXRoIG5hbWVzcGFjZSBjb25maWcuYCk7aWYodCYmaSlyZXR1cm5bdCxpXTtjb25zdCBzPVUoT2JqZWN0LmtleXModGhpcy5uYW1lc3BhY2VzKVswXSksbj10aGlzLnJwY1Byb3ZpZGVyc1tzXS5nZXREZWZhdWx0Q2hhaW4oKTtyZXR1cm5bcyxuXX1hc3luYyByZXF1ZXN0QWNjb3VudHMoKXtjb25zdFtlXT10aGlzLnZhbGlkYXRlQ2hhaW4oKTtyZXR1cm4gYXdhaXQgdGhpcy5nZXRQcm92aWRlcihlKS5yZXF1ZXN0QWNjb3VudHMoKX1vbkNoYWluQ2hhbmdlZChlLHQ9ITEpe2lmKCF0aGlzLm5hbWVzcGFjZXMpcmV0dXJuO2NvbnN0W2ksc109dGhpcy52YWxpZGF0ZUNoYWluKGUpO3MmJih0fHx0aGlzLmdldFByb3ZpZGVyKGkpLnNldERlZmF1bHRDaGFpbihzKSx0aGlzLm5hbWVzcGFjZXNbaV0/dGhpcy5uYW1lc3BhY2VzW2ldLmRlZmF1bHRDaGFpbj1zOnRoaXMubmFtZXNwYWNlc1tgJHtpfToke3N9YF0/dGhpcy5uYW1lc3BhY2VzW2Ake2l9OiR7c31gXS5kZWZhdWx0Q2hhaW49czp0aGlzLm5hbWVzcGFjZXNbYCR7aX06JHtzfWBdPXtkZWZhdWx0Q2hhaW46c30sdGhpcy5wZXJzaXN0KFwibmFtZXNwYWNlc1wiLHRoaXMubmFtZXNwYWNlcyksdGhpcy5ldmVudHMuZW1pdChcImNoYWluQ2hhbmdlZFwiLHMpKX1vbkNvbm5lY3QoKXt0aGlzLmNyZWF0ZVByb3ZpZGVycygpLHRoaXMuZXZlbnRzLmVtaXQoXCJjb25uZWN0XCIse3Nlc3Npb246dGhpcy5zZXNzaW9ufSl9YXN5bmMgY2xlYW51cCgpe3RoaXMuc2Vzc2lvbj12b2lkIDAsdGhpcy5uYW1lc3BhY2VzPXZvaWQgMCx0aGlzLm9wdGlvbmFsTmFtZXNwYWNlcz12b2lkIDAsdGhpcy5zZXNzaW9uUHJvcGVydGllcz12b2lkIDAsdGhpcy5wZXJzaXN0KFwibmFtZXNwYWNlc1wiLHZvaWQgMCksdGhpcy5wZXJzaXN0KFwib3B0aW9uYWxOYW1lc3BhY2VzXCIsdm9pZCAwKSx0aGlzLnBlcnNpc3QoXCJzZXNzaW9uUHJvcGVydGllc1wiLHZvaWQgMCksYXdhaXQgdGhpcy5jbGVhbnVwUGVuZGluZ1BhaXJpbmdzKHtkZWxldGVQYWlyaW5nczohMH0pfXBlcnNpc3QoZSx0KXt0aGlzLmNsaWVudC5jb3JlLnN0b3JhZ2Uuc2V0SXRlbShgJHskZX0vJHtlfWAsdCl9YXN5bmMgZ2V0RnJvbVN0b3JlKGUpe3JldHVybiBhd2FpdCB0aGlzLmNsaWVudC5jb3JlLnN0b3JhZ2UuZ2V0SXRlbShgJHskZX0vJHtlfWApfX1jb25zdCBvaD1aO2V4cG9ydHtvaCBhcyBVbml2ZXJzYWxQcm92aWRlcixaIGFzIGRlZmF1bHR9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXMuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@walletconnect/universal-provider/dist/index.es.js\n\n}");

/***/ }

}]);